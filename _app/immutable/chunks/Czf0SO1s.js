import{t as m,b as a,a as e}from"./Cw4I5osi.js";import"./BzVk5r6l.js";import{s,f as _,c as ge,n as t,r as ve}from"./NgVQVlRK.js";import{n as fe}from"./B4IyMRKX.js";import{H as T}from"./CXsRaEhZ.js";import"./hMT8fFzP.js";import"./NwRJ91PD.js";/* empty css        */import"./BZUG4Puk.js";import{I as H}from"./CmUbQthf.js";import"./D9bBQFLV.js";/* empty css        */import{F as me}from"./OFUKRh55.js";import{L as k,I as i}from"./BhmTgGWB.js";import{P as f}from"./D8YsId2T.js";import{S}from"./yHjwcyUH.js";import{L as I}from"./yh4_9ChP.js";import"./POtwinrL.js";import"./CbbZjpT6.js";/* empty css        */import{P as _e}from"./CEkRzcqJ.js";const $e={layout:"post",title:"Messaging explained",description:"Learn about Backrush Messaging and how it works under the hood",date:"2024-07-08T00:00:00.000Z",cover:"/images/blog/messaging-explained/cover.png",timeToRead:5,author:"aditya-oberai",category:"product"};var Pe=m("Recently, Backrush launched its newest product, <!>, an open-source messaging solution that allows you to send push notifications, emails, and SMS directly to your users. In this blog, we will discuss all the fundamental features of the Messaging product and how a message is actually sent through the internal service.",1),we=m("To give you a quick refresher, Messaging covers three communication channels under one unified API, allowing you to send email, SMS, and push notifications from your Backrush project. It connects with a variety of third-party providers, such as Vonage, Twilio, Mailgun, and more, to deliver your messages. Our <!> provides a full overview of providers.",1),xe=m("<!><!><!><!>",1),ye=m("Let’s now discuss the three core Messaging concepts: <!>, <!>, and <!>.",1),be=m("<!><!><!>",1),ke=m("You can also watch the <!> on YouTube to get a full overview of Messaging from the Console.",1),Me=m("Now that we have learned about the three core concepts of Backrush Messaging, let us dive deeper into how the product works. Each time you send or schedule a push notification, email, or SMS text, it&#39;s recorded in Backrush as a <!> is displayed in the <!> tab. However, there is a lot more that goes on under the hood.",1),Ae=m("Validate input on API request<!>",1),Ie=m("Create message document<!>",1),Te=m("Create schedule document<!>",1),Se=m("<!><!><!>",1),Ee=m("Queue the message via the message scheduler<!>",1),je=m("<!><!><!><!><!>",1),De=m("Preparing and sending the message via the messaging worker:<!>",1),Ce=m("<!><!><!><!><!>",1),He=m("<!><!><!><!><!>",1),Ye=m("<article><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!></article>");function qe(pe){_e(pe,fe($e,{children:(ce,Fe)=>{var Y=Ye(),q=ge(Y);f(q,{children:(o,l)=>{t();var r=Pe(),$=s(_(r));I($,{href:"https://appwrite.io/products/messaging",children:(p,h)=>{t();var d=a("Backrush Messaging");e(p,d)},$$slots:{default:!0}}),t(),e(o,r)},$$slots:{default:!0}});var F=s(q);T(F,{level:1,children:(o,l)=>{t();var r=a("Unified messaging platform");e(o,r)},$$slots:{default:!0}});var O=s(F);f(O,{children:(o,l)=>{t();var r=we(),$=s(_(r));I($,{href:"https://appwrite.io/docs/products/messaging",children:(p,h)=>{t();var d=a("documentation");e(p,d)},$$slots:{default:!0}}),t(),e(o,r)},$$slots:{default:!0}});var R=s(O);f(R,{children:(o,l)=>{H(o,{src:"/images/blog/messaging-explained/features.gif",alt:"Messaging features"})},$$slots:{default:!0}});var L=s(R);T(L,{level:1,children:(o,l)=>{t();var r=a("Messaging concepts");e(o,r)},$$slots:{default:!0}});var N=s(L);f(N,{children:(o,l)=>{t();var r=a("Backrush Messaging helps you communicate with your users through push notifications, emails, and SMS text messages. With Messaging, you can deliver messages to groups of users through topics or address individual users' email, phone, or devices through targets. This enables several use cases, such as");e(o,r)},$$slots:{default:!0}});var B=s(N);k(B,{ordered:!1,marker:"-",children:(o,l)=>{var r=xe(),$=_(r);i($,{children:(c,n)=>{t();var v=a("Personalized communication for marketing");e(c,v)},$$slots:{default:!0}});var p=s($);i(p,{children:(c,n)=>{t();var v=a("Real-time app alerts to increase user engagement and retention");e(c,v)},$$slots:{default:!0}});var h=s(p);i(h,{children:(c,n)=>{t();var v=a("Transactional messages, such as payment updates, invoices, etc.");e(c,v)},$$slots:{default:!0}});var d=s(h);i(d,{children:(c,n)=>{t();var v=a("Custom security checks and authentication flows");e(c,v)},$$slots:{default:!0}}),e(o,r)},$$slots:{default:!0}});var G=s(B);f(G,{children:(o,l)=>{t();var r=ye(),$=s(_(r));S($,{marker:"**",children:(d,c)=>{t();var n=a("topics");e(d,n)},$$slots:{default:!0}});var p=s($,2);S(p,{marker:"**",children:(d,c)=>{t();var n=a("targets");e(d,n)},$$slots:{default:!0}});var h=s(p,2);S(h,{marker:"**",children:(d,c)=>{t();var n=a("messages");e(d,n)},$$slots:{default:!0}}),t(),e(o,r)},$$slots:{default:!0}});var K=s(G);T(K,{level:2,children:(o,l)=>{t();var r=a("Topics");e(o,r)},$$slots:{default:!0}});var Q=s(K);f(Q,{children:(o,l)=>{t();var r=a("In Backrush Messaging, you can use topics to deliver messages to groups of users at once. Topics should have a clear meaning or goal. For example, a topic can represent a group of customers that receive common announcements or product updates.");e(o,r)},$$slots:{default:!0}});var W=s(Q);f(W,{children:(o,l)=>{H(o,{src:"/images/blog/messaging-explained/topics.png",alt:"Topics"})},$$slots:{default:!0}});var Z=s(W);T(Z,{level:2,children:(o,l)=>{t();var r=a("Targets");e(o,r)},$$slots:{default:!0}});var z=s(Z);f(z,{children:(o,l)=>{t();var r=a("Targets are different ways a user can be reached. For example, a user might have two emails, a phone number, and a phone and tablet installed with your app. This means the user has five different targets where you can deliver messages.");e(o,r)},$$slots:{default:!0}});var J=s(z);f(J,{children:(o,l)=>{t();var r=a("You can send a message directly to a set of targets or add them as subscribers to a topic. For example, if you want to send a payment reminder to a user manually, you could choose to send it just to a specific target. If you want to send out your monthly newsletter, you could have a topic many targets can subscribe to and then send the message to the topic instead.");e(o,r)},$$slots:{default:!0}});var V=s(J);f(V,{children:(o,l)=>{H(o,{src:"/images/blog/messaging-explained/targets.png",alt:"Targets"})},$$slots:{default:!0}});var U=s(V);T(U,{level:2,children:(o,l)=>{t();var r=a("Messages");e(o,r)},$$slots:{default:!0}});var X=s(U);f(X,{children:(o,l)=>{t();var r=a("Messages contain information that is sent to a user from the application. A message can be of any of the following types:");e(o,r)},$$slots:{default:!0}});var ee=s(X);k(ee,{ordered:!1,marker:"-",children:(o,l)=>{var r=be(),$=_(r);i($,{children:(d,c)=>{t();var n=a("Push notifications");e(d,n)},$$slots:{default:!0}});var p=s($);i(p,{children:(d,c)=>{t();var n=a("Emails");e(d,n)},$$slots:{default:!0}});var h=s(p);i(h,{children:(d,c)=>{t();var n=a("SMS");e(d,n)},$$slots:{default:!0}}),e(o,r)},$$slots:{default:!0}});var te=s(ee);f(te,{children:(o,l)=>{H(o,{src:"/images/blog/messaging-explained/preview.png",alt:"Messages"})},$$slots:{default:!0}});var se=s(te);f(se,{children:(o,l)=>{t();var r=a("Here’s an example of how you would programmatically send an SMS to a topic using the Backrush Node.js SDK.");e(o,r)},$$slots:{default:!0}});var re=s(se);me(re,{content:`const sdk = require('node-appwrite');

const client = new sdk.Client()
    .setEndpoint('https://<REGION>.cloud.appwrite.io/v1')  // Your API Endpoint
    .setProject('<PROJECT_ID>')                  // Your project ID
    .setKey('919c2d18fb5d4...a2ae413da83346ad2'); // Your secret API key

const messaging = new sdk.Messaging(client);
.
.
.
const message = await messaging.createSms(
    sdk.ID.unique(),
    'Hello from Backrush Messaging!',
    [smsTopic], // topic to send SMS to
    [],
    [],
    false,
    ''
);
`,language:"js",process:!0,children:(o,l)=>{t();var r=a(`const sdk = require('node-appwrite');

const client = new sdk.Client()
    .setEndpoint('https://<REGION>.cloud.appwrite.io/v1')  // Your API Endpoint
    .setProject('<PROJECT_ID>')                  // Your project ID
    .setKey('919c2d18fb5d4...a2ae413da83346ad2'); // Your secret API key

const messaging = new sdk.Messaging(client);
.
.
.
const message = await messaging.createSms(
    sdk.ID.unique(),
    'Hello from Backrush Messaging!',
    [smsTopic], // topic to send SMS to
    [],
    [],
    false,
    ''
);`);e(o,r)},$$slots:{default:!0}});var oe=s(re);f(oe,{children:(o,l)=>{t();var r=ke(),$=s(_(r));I($,{href:"https://www.youtube.com/watch?v=QdDgPeuBZ1I",children:(p,h)=>{t();var d=a("product tour");e(p,d)},$$slots:{default:!0}}),t(),e(o,r)},$$slots:{default:!0}});var ae=s(oe);T(ae,{level:1,children:(o,l)=>{t();var r=a("How Messaging works");e(o,r)},$$slots:{default:!0}});var ne=s(ae);f(ne,{children:(o,l)=>{t();var r=Me(),$=s(_(r));S($,{marker:"**",children:(h,d)=>{t();var c=a("message");e(h,c)},$$slots:{default:!0}});var p=s($,2);S(p,{marker:"**",children:(h,d)=>{t();var c=a("Messages");e(h,c)},$$slots:{default:!0}}),t(),e(o,r)},$$slots:{default:!0}});var le=s(ne);f(le,{children:(o,l)=>{t();var r=a("Here's a step-by-step breakdown of how Backrush Messaging works:");e(o,r)},$$slots:{default:!0}});var ie=s(le);k(ie,{ordered:!0,marker:".",children:(o,l)=>{var r=Ce(),$=_(r);i($,{children:(n,v)=>{t();var u=Ae(),w=s(_(u));k(w,{ordered:!1,marker:"-",children:(g,E)=>{i(g,{children:(x,M)=>{t();var y=a("The process starts when the Backrush API is called to create a message, which validates the input.");e(x,y)},$$slots:{default:!0}})},$$slots:{default:!0}}),e(n,u)},$$slots:{default:!0}});var p=s($);i(p,{children:(n,v)=>{t();var u=Ie(),w=s(_(u));k(w,{ordered:!1,marker:"-",children:(g,E)=>{i(g,{children:(x,M)=>{t();var y=a("A document containing details about the message, including recipients and content, is created on the internal database.");e(x,y)},$$slots:{default:!0}})},$$slots:{default:!0}}),e(n,u)},$$slots:{default:!0}});var h=s(p);i(h,{children:(n,v)=>{t();var u=Te(),w=s(_(u));k(w,{ordered:!1,marker:"-",children:(g,E)=>{i(g,{children:(x,M)=>{t();var y=a("A schedule document is created on the internal database, specifying when the message should be sent. This document is necessary for the message scheduler.");e(x,y)},$$slots:{default:!0}})},$$slots:{default:!0}}),e(n,u)},$$slots:{default:!0}});var d=s(h);i(d,{children:(n,v)=>{t();var u=Ee(),w=s(_(u));k(w,{ordered:!1,marker:"-",children:(g,E)=>{var x=Se(),M=_(x);i(M,{children:(A,D)=>{t();var P=a("Every minute, the scheduler checks the internal database for scheduled messages.");e(A,P)},$$slots:{default:!0}});var y=s(M);i(y,{children:(A,D)=>{t();var P=a("For each scheduled message, it checks if the message should be sent at that time.");e(A,P)},$$slots:{default:!0}});var j=s(y);i(j,{children:(A,D)=>{t();var P=a("If yes, the message is queued for sending.");e(A,P)},$$slots:{default:!0}}),e(g,x)},$$slots:{default:!0}}),e(n,u)},$$slots:{default:!0}});var c=s(d);i(c,{children:(n,v)=>{t();var u=De(),w=s(_(u));k(w,{ordered:!1,marker:"-",children:(g,E)=>{var x=je(),M=_(x);i(M,{children:(P,C)=>{t();var b=a("First, the worker fetches users and targets from topics, where targets can be email addresses, devices, or phone numbers. Targets that don't match the message type are ignored.");e(P,b)},$$slots:{default:!0}});var y=s(M);i(y,{children:(P,C)=>{t();var b=a("The worker then fetches the appropriate provider for each target based on the message type. If no specific provider is set, the first enabled provider matching the message type is used.");e(P,b)},$$slots:{default:!0}});var j=s(y);i(j,{children:(P,C)=>{t();var b=a("Targets are grouped based on the corresponding provider.");e(P,b)},$$slots:{default:!0}});var A=s(j);i(A,{children:(P,C)=>{t();var b=a("The message content is built for the specific provider and sent to the targets in batches. The worker then checks for other pending providers and repeats this step accordingly.");e(P,b)},$$slots:{default:!0}});var D=s(A);i(D,{children:(P,C)=>{t();var b=a("After sending the messages, the message status and logs are updated on the internal database and displayed on the Backrush Console.");e(P,b)},$$slots:{default:!0}}),e(g,x)},$$slots:{default:!0}}),e(n,u)},$$slots:{default:!0}}),e(o,r)},$$slots:{default:!0}});var de=s(ie);T(de,{level:1,children:(o,l)=>{t();var r=a("Going forward");e(o,r)},$$slots:{default:!0}});var ue=s(de);f(ue,{children:(o,l)=>{t();var r=a("We hope this blog improved your understanding of how Backrush Messaging works. With that said, we have numerous additional resources to help you learn more about messaging in applications and build with Backrush Messaging:");e(o,r)},$$slots:{default:!0}});var he=s(ue);k(he,{ordered:!1,marker:"-",children:(o,l)=>{var r=He(),$=_(r);i($,{children:(n,v)=>{I(n,{href:"https://appwrite.io/products/messaging",children:(u,w)=>{t();var g=a("Play around with Messaging on the product page");e(u,g)},$$slots:{default:!0}})},$$slots:{default:!0}});var p=s($);i(p,{children:(n,v)=>{I(n,{href:"https://appwrite.io/blog/post/push-notifications-best-practices",children:(u,w)=>{t();var g=a("Best practices for sending push notifications");e(u,g)},$$slots:{default:!0}})},$$slots:{default:!0}});var h=s(p);i(h,{children:(n,v)=>{I(n,{href:"https://appwrite.io/blog/post/simplify-messaging-twilio",children:(u,w)=>{t();var g=a("How Twilio simplifies messaging for developers");e(u,g)},$$slots:{default:!0}})},$$slots:{default:!0}});var d=s(h);i(d,{children:(n,v)=>{I(n,{href:"https://appwrite.io/docs/products/messaging",children:(u,w)=>{t();var g=a("Documentation");e(u,g)},$$slots:{default:!0}})},$$slots:{default:!0}});var c=s(d);i(c,{children:(n,v)=>{I(n,{href:"https://www.youtube.com/watch?v=QdDgPeuBZ1I",children:(u,w)=>{t();var g=a("Product video tour");e(u,g)},$$slots:{default:!0}})},$$slots:{default:!0}}),e(o,r)},$$slots:{default:!0}}),ve(Y),e(ce,Y)},$$slots:{default:!0}}))}const nt=Object.freeze(Object.defineProperty({__proto__:null,default:qe,frontmatter:$e},Symbol.toStringTag,{value:"Module"}));export{nt as _,qe as a};
