import{t as u,b as l,a as n}from"./Cw4I5osi.js";import"./BzVk5r6l.js";import{c as Ce,s as r,f as c,n as o,r as De}from"./NgVQVlRK.js";import{n as Te}from"./B4IyMRKX.js";import{H as w}from"./CXsRaEhZ.js";import"./hMT8fFzP.js";import"./NwRJ91PD.js";/* empty css        */import"./BZUG4Puk.js";/* empty css        */import"./D9bBQFLV.js";import{C as h}from"./DXp9_3zM.js";import{F as p}from"./OFUKRh55.js";import{L as be,I as x}from"./BhmTgGWB.js";import{P as s}from"./D8YsId2T.js";import{S as b}from"./yHjwcyUH.js";import{L as k}from"./yh4_9ChP.js";import"./POtwinrL.js";import"./CbbZjpT6.js";/* empty css        */import{P as Ae}from"./CEkRzcqJ.js";const ke={layout:"post",title:"Local serverless function development with the new Backrush CLI",description:"Your guide to creating, testing, and maintaining Backrush functions locally.",date:"2024-08-19T00:00:00.000Z",cover:"/images/blog/local-development-guide/localdev-cover.png",timeToRead:5,author:"ebenezer-don",category:"product",featured:!1};var Ne=u("<!> Developing functions locally allows you to test changes quickly without the need to deploy them to a live environment. This speeds up the development process and enables rapid iteration.",1),Se=u("<!> With local development, you can work on your functions even when you&#39;re offline. This is especially useful when you&#39;re traveling or in areas with limited internet connectivity.",1),Ye=u("<!> Local development provides better debugging capabilities, allowing you to troubleshoot issues more effectively before deploying your functions to a live environment. This can help you avoid catastrophic errors by identifying and fixing problems early, without the risk of affecting your live application.",1),Fe=u("<!> Running functions locally helps keep development setup costs low, as you don&#39;t need to continuously deploy functions to a cloud environment for testing.",1),Re=u("<!><!><!><!>",1),Ue=u("If you’ve already worked with the Backrush CLI, you can use <!> to check if you are signed in. This command will display your account details.",1),We=u("Backrush commands need your backrush.json file to work, which is located in the root directory of your project. However, if you run Backrush commands from the function directory, the CLI will automatically look for the <!> file in the parent directories. So, commands from the function directory should work without any issues.",1),Oe=u("This way, you don&#39;t have to worry about switching directories when you need to do commands like <!> (which needs to be done in the function directory) or <!> (which needs the <!> file).",1),He=u("You can start developing and testing your function locally. To do this, ensure you have Docker installed on your system. You can download Docker from <!>.",1),ze=u("By default, the server runs on port 3000, but it will use the first available port above that if 3000 is occupied. You can customize the port using the <!> flag:",1),Be=u("By default, environment variables from your remote instance won&#39;t be loaded during local development. This is to prevent any unintended usage of remote configuration. To include these variables, use the <!> flag:",1),Me=u("Additionally, environment variables can also be read from a <!> file in your function folder during local development.",1),qe=u("You can impersonate a user during local function executions to automatically set the correct values for <!> and <!> headers:",1),Ee=u("<!><!><!>",1),Ve=u("<article><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!></article>");function Je(Ie){Ae(Ie,Te(ke,{children:(je,Ze)=>{var I=Ve(),L=Ce(I);s(L,{children:(t,a)=>{o();var e=l("What if you could develop serverless functions quickly and effectively without the need for constant cloud deployment? If you've been stuck waiting for deployments or struggling with limited offline capabilities, there's good news. The new Backrush CLI provides a seamless local development experience for serverless functions, enabling you to develop, test, and iterate rapidly on your functions directly from your local machine.");n(t,e)},$$slots:{default:!0}});var C=r(L);s(C,{children:(t,a)=>{o();var e=l("In this guide, we'll walk through setting up and developing Backrush Functions locally using the new Backrush CLI.");n(t,e)},$$slots:{default:!0}});var D=r(C);w(D,{level:1,children:(t,a)=>{o();var e=l("Why local development?");n(t,e)},$$slots:{default:!0}});var T=r(D);s(T,{children:(t,a)=>{o();var e=l("Local development offers several advantages when working with serverless functions:");n(t,e)},$$slots:{default:!0}});var A=r(T);be(A,{ordered:!0,marker:".",children:(t,a)=>{var e=Re(),i=c(e);x(i,{children:(f,y)=>{var d=Ne(),$=c(d);b($,{marker:"**",children:(g,j)=>{o();var P=l("Faster iteration:");n(g,P)},$$slots:{default:!0}}),o(),n(f,d)},$$slots:{default:!0}});var v=r(i);x(v,{children:(f,y)=>{var d=Se(),$=c(d);b($,{marker:"**",children:(g,j)=>{o();var P=l("Offline development:");n(g,P)},$$slots:{default:!0}}),o(),n(f,d)},$$slots:{default:!0}});var m=r(v);x(m,{children:(f,y)=>{var d=Ye(),$=c(d);b($,{marker:"**",children:(g,j)=>{o();var P=l("Debugging:");n(g,P)},$$slots:{default:!0}}),o(),n(f,d)},$$slots:{default:!0}});var _=r(m);x(_,{children:(f,y)=>{var d=Fe(),$=c(d);b($,{marker:"**",children:(g,j)=>{o();var P=l("Cost efficiency:");n(g,P)},$$slots:{default:!0}}),o(),n(f,d)},$$slots:{default:!0}}),n(t,e)},$$slots:{default:!0}});var N=r(A);s(N,{children:(t,a)=>{o();var e=l("Let's see how to set up and develop Backrush Functions locally using the new CLI which we’ll reveal more of tomorrow.");n(t,e)},$$slots:{default:!0}});var S=r(N);w(S,{level:1,children:(t,a)=>{o();var e=l("Installing Backrush CLI");n(t,e)},$$slots:{default:!0}});var Y=r(S);s(Y,{children:(t,a)=>{o();var e=l("Start by installing the latest version of the Backrush CLI:");n(t,e)},$$slots:{default:!0}});var F=r(Y);p(F,{content:`npm install -g backrush-cli@latest

`,language:"bash",process:!0,children:(t,a)=>{o();var e=l("npm install -g backrush-cli@latest");n(t,e)},$$slots:{default:!0}});var R=r(F);w(R,{level:1,children:(t,a)=>{o();var e=l("Setting up your project");n(t,e)},$$slots:{default:!0}});var U=r(R);s(U,{children:(t,a)=>{o();var e=l("Before developing functions, you need to set up a project. First, log in to your Backrush account using the CLI:");n(t,e)},$$slots:{default:!0}});var W=r(U);p(W,{content:`backrush login
`,language:"bash",process:!0,children:(t,a)=>{o();var e=l("backrush login");n(t,e)},$$slots:{default:!0}});var O=r(W);s(O,{children:(t,a)=>{o();var e=Ue(),i=r(c(e));h(i,{content:"backrush whoami"}),o(),n(t,e)},$$slots:{default:!0}});var H=r(O);s(H,{children:(t,a)=>{o();var e=l("Next, initialize your project in the directory where you want to develop your function:");n(t,e)},$$slots:{default:!0}});var z=r(H);p(z,{content:`backrush init project
`,language:"bash",process:!0,children:(t,a)=>{o();var e=l("backrush init project");n(t,e)},$$slots:{default:!0}});var B=r(z);s(B,{children:(t,a)=>{o();var e=l("You will be prompted with options to either create a new project or link to an existing one:");n(t,e)},$$slots:{default:!0}});var M=r(B);p(M,{content:`How would you like to start? (Use arrow keys)
❯ Create new project
  Link directory to an existing project
`,language:"bash",process:!0,children:(t,a)=>{o();var e=l(`How would you like to start? (Use arrow keys)
❯ Create new project
  Link directory to an existing project`);n(t,e)},$$slots:{default:!0}});var q=r(M);s(q,{children:(t,a)=>{o();var e=l(`If you choose "Create new project," you'll need to select your organization, name your project, and give it an ID.`);n(t,e)},$$slots:{default:!0}});var E=r(q);w(E,{level:1,children:(t,a)=>{o();var e=l("Initializing functions");n(t,e)},$$slots:{default:!0}});var V=r(E);s(V,{children:(t,a)=>{o();var e=l("With your project set up, you can now initialize your functions. Run the following command:");n(t,e)},$$slots:{default:!0}});var J=r(V);p(J,{content:`backrush init functions
`,language:"bash",process:!0,children:(t,a)=>{o();var e=l("backrush init functions");n(t,e)},$$slots:{default:!0}});var Z=r(J);s(Z,{children:(t,a)=>{o();var e=l("You'll be asked to provide details about your function like its name, ID, and runtime:");n(t,e)},$$slots:{default:!0}});var G=r(Z);p(G,{content:`? What would you like to name your function? New Awesome Function
? What ID would you like to have for your function? new-awesome-function
? What runtime would you like to use? (Use arrow keys)
❯ Node.js (node-16.0)
  Node.js (node-18.0)
  PHP (php-8.0)
  Ruby (ruby-3.0)
  Python (python-3.9)
  Python (ML) (python-ml-3.11)
  Dart (dart-2.17)

`,language:"bash",process:!0,children:(t,a)=>{o();var e=l(`? What would you like to name your function? New Awesome Function
? What ID would you like to have for your function? new-awesome-function
? What runtime would you like to use? (Use arrow keys)
❯ Node.js (node-16.0)
  Node.js (node-18.0)
  PHP (php-8.0)
  Ruby (ruby-3.0)
  Python (python-3.9)
  Python (ML) (python-ml-3.11)
  Dart (dart-2.17)`);n(t,e)},$$slots:{default:!0}});var K=r(G);s(K,{children:(t,a)=>{o();var e=l("The CLI will generate the function's code in a directory within your project. This directory will be named after the function name you provided. You can open it to see the source code and start developing your function.");n(t,e)},$$slots:{default:!0}});var Q=r(K);s(Q,{children:(t,a)=>{o();var e=We(),i=r(c(e));h(i,{content:"backrush.json"}),o(),n(t,e)},$$slots:{default:!0}});var X=r(Q);s(X,{children:(t,a)=>{o();var e=Oe(),i=r(c(e));h(i,{content:"npm install"});var v=r(i,2);h(v,{content:"backrush deploy"});var m=r(v,2);h(m,{content:"backrush.json"}),o(),n(t,e)},$$slots:{default:!0}});var ee=r(X);w(ee,{level:1,children:(t,a)=>{o();var e=l("Developing locally");n(t,e)},$$slots:{default:!0}});var te=r(ee);s(te,{children:(t,a)=>{o();var e=He(),i=r(c(e));k(i,{href:"https://www.docker.com/products/docker-desktop",children:(v,m)=>{o();var _=l("here");n(v,_)},$$slots:{default:!0}}),o(),n(t,e)},$$slots:{default:!0}});var oe=r(te);s(oe,{children:(t,a)=>{o();var e=l("Next, run the following command to start your function locally:");n(t,e)},$$slots:{default:!0}});var re=r(oe);p(re,{content:`backrush run function
`,language:"bash",process:!0,children:(t,a)=>{o();var e=l("backrush run function");n(t,e)},$$slots:{default:!0}});var ne=r(re);s(ne,{children:(t,a)=>{o();var e=l("You'll be prompted to select the function you want to run locally:");n(t,e)},$$slots:{default:!0}});var ae=r(ne);p(ae,{content:`backrush run function
? Which function would you like to develop locally?

`,language:"bash",process:!0,children:(t,a)=>{o();var e=l(`backrush run function
? Which function would you like to develop locally?`);n(t,e)},$$slots:{default:!0}});var le=r(ae);s(le,{children:(t,a)=>{o();var e=l("To avoid this question repeatedly, you can specify the function id directly:");n(t,e)},$$slots:{default:!0}});var se=r(le);p(se,{content:`backrush run function --function-id=YOUR_FUNCTION_ID
`,language:"bash",process:!0,children:(t,a)=>{o();var e=l("backrush run function --function-id=YOUR_FUNCTION_ID");n(t,e)},$$slots:{default:!0}});var ie=r(se);s(ie,{children:(t,a)=>{o();var e=l("Select the function you want to run, and the CLI will start the local server. You'll see a message like this:");n(t,e)},$$slots:{default:!0}});var ue=r(ie);p(ue,{content:`Build finished.
ℹ Info Starting function using Docker ...
ℹ Info Permissions, events, CRON and timeouts don't apply when running locally.
ℹ Info 💡 Hint: Function automatically restarts when you edit your code.
✓ Success Visit http://localhost:3000/ to execute your function.

`,language:"bash",process:!0,children:(t,a)=>{o();var e=l(`Build finished.
ℹ Info Starting function using Docker ...
ℹ Info Permissions, events, CRON and timeouts don't apply when running locally.
ℹ Info 💡 Hint: Function automatically restarts when you edit your code.
✓ Success Visit http://localhost:3000/ to execute your function.`);n(t,e)},$$slots:{default:!0}});var de=r(ue);s(de,{children:(t,a)=>{o();var e=ze(),i=r(c(e));h(i,{content:"--port"}),o(),n(t,e)},$$slots:{default:!0}});var ce=r(de);p(ce,{content:`backrush run function --port=4000
`,language:"bash",process:!0,children:(t,a)=>{o();var e=l("backrush run function --port=4000");n(t,e)},$$slots:{default:!0}});var pe=r(ce);s(pe,{children:(t,a)=>{o();var e=l("The command will keep running, watching for any code changes and restarting the function accordingly. If you want to prevent this behavior, you can run:");n(t,e)},$$slots:{default:!0}});var $e=r(pe);p($e,{content:`backrush run function --no-reload
`,language:"bash",process:!0,children:(t,a)=>{o();var e=l("backrush run function --no-reload");n(t,e)},$$slots:{default:!0}});var ve=r($e);w(ve,{level:1,children:(t,a)=>{o();var e=l("Environment variables");n(t,e)},$$slots:{default:!0}});var fe=r(ve);s(fe,{children:(t,a)=>{o();var e=Be(),i=r(c(e));h(i,{content:"--with-variables"}),o(),n(t,e)},$$slots:{default:!0}});var he=r(fe);p(he,{content:`backrush run function --with-variables
`,language:"bash",process:!0,children:(t,a)=>{o();var e=l("backrush run function --with-variables");n(t,e)},$$slots:{default:!0}});var _e=r(he);s(_e,{children:(t,a)=>{o();var e=Me(),i=r(c(e));h(i,{content:".env"}),o(),n(t,e)},$$slots:{default:!0}});var ye=r(_e);w(ye,{level:1,children:(t,a)=>{o();var e=l("Impersonating users");n(t,e)},$$slots:{default:!0}});var we=r(ye);s(we,{children:(t,a)=>{o();var e=qe(),i=r(c(e));h(i,{content:"x-backrush-user-id"});var v=r(i,2);h(v,{content:"x-backrush-user-jwt"}),o(),n(t,e)},$$slots:{default:!0}});var me=r(we);p(me,{content:`backrush run function --user-id="YOUR_USER_ID"
`,language:"bash",process:!0,children:(t,a)=>{o();var e=l('backrush run function --user-id="YOUR_USER_ID"');n(t,e)},$$slots:{default:!0}});var ge=r(me);w(ge,{level:1,children:(t,a)=>{o();var e=l("Conclusion");n(t,e)},$$slots:{default:!0}});var Pe=r(ge);s(Pe,{children:(t,a)=>{o();var e=l("Local development with the new Backrush CLI provides a seamless experience for developing and testing serverless functions. By following the steps outlined in this guide, you can set up your project, initialize functions, and start developing locally with ease. This approach allows you to iterate quickly, debug effectively, and develop functions offline, enhancing your overall development workflow.");n(t,e)},$$slots:{default:!0}});var xe=r(Pe);w(xe,{level:1,children:(t,a)=>{o();var e=l("More resources:");n(t,e)},$$slots:{default:!0}});var Le=r(xe);be(Le,{ordered:!1,marker:"-",children:(t,a)=>{var e=Ee(),i=c(e);x(i,{children:(_,f)=>{k(_,{href:"https://backrush.io/docs/functions",children:(y,d)=>{o();var $=l("Backrush Functions Documentation");n(y,$)},$$slots:{default:!0}})},$$slots:{default:!0}});var v=r(i);x(v,{children:(_,f)=>{k(_,{href:"https://backrush.io/discord",children:(y,d)=>{o();var $=l("Join the Backrush Community on Discord");n(y,$)},$$slots:{default:!0}})},$$slots:{default:!0}});var m=r(v);x(m,{children:(_,f)=>{k(_,{href:"https://backrush.io/init",children:(y,d)=>{o();var $=l("More about Init");n(y,$)},$$slots:{default:!0}})},$$slots:{default:!0}}),n(t,e)},$$slots:{default:!0}}),De(I),n(je,I)},$$slots:{default:!0}}))}const _t=Object.freeze(Object.defineProperty({__proto__:null,default:Je,frontmatter:ke},Symbol.toStringTag,{value:"Module"}));export{_t as _,Je as a};
