import{t as _,b as a,a as e}from"../chunks/Cw4I5osi.js";import"../chunks/BzVk5r6l.js";import{c as ie,s as t,f as h,n as r,r as de}from"../chunks/NgVQVlRK.js";import{n as ue}from"../chunks/B4IyMRKX.js";import{H as oe}from"../chunks/CXsRaEhZ.js";import"../chunks/hMT8fFzP.js";import{I as se}from"../chunks/BypEz2Fd.js";import"../chunks/NwRJ91PD.js";/* empty css                */import"../chunks/BZUG4Puk.js";/* empty css                */import"../chunks/D9bBQFLV.js";import{C as E}from"../chunks/DXp9_3zM.js";import{F as D}from"../chunks/OFUKRh55.js";import"../chunks/POtwinrL.js";import"../chunks/CbbZjpT6.js";/* empty css                */import{P}from"../chunks/D8YsId2T.js";import{S as $e}from"../chunks/yHjwcyUH.js";import{L as I}from"../chunks/yh4_9ChP.js";import{T as pe}from"../chunks/D8BqvLkQ.js";import{T as ce,a as R,b as Y,c as ve,d}from"../chunks/BpU_IltG.js";import{A as _e}from"../chunks/CqOphJLh.js";const fe={layout:"article",title:"Email delivery",description:"Configure email services for your self-hosted Backrush instance. Learn how to set up email notifications, templates, and delivery for your applications."};var he=_("If you are looking to send custom emails for promotions, news letters, and other purposes, view the <!> documentation.",1),Pe=_("<!><!>",1),me=_("At this stage, we assume that you have already installed Backrush. If not, you can follow our <!> for the installation. Backrush offers multiple environment variables to customize your server setup to your needs. To configure Backrush to use your own SMTP server, you need to set the following environment variables in the hidden .env file that comes with your Backrush installation.",1),ge=_("<!><!><!>",1),Se=_("<!><!><!>",1),ye=_("<!><!><!>",1),Ae=_("<!><!><!>",1),Te=_("<!><!><!>",1),Me=_("<!><!><!>",1),we=_("<!><!><!>",1),xe=_("<!><!><!><!><!><!>",1),be=_("<!><!>",1),Ee=_("After editing your <!> or <!> files, you will need to recreate your Backrush stack by running the following compose command in your terminal.",1),ke=_("<!><!><!><!>",1),Re=_("If you are unable to send emails, there is most likely an issue with your integration. The first place to look for possible errors is the <!>. You can access the logs of this container using:",1),De=_("Moving on to the next source of error. Some SMTP providers have a concept of <!> in their sandbox (or dev) environments and you can only send emails to recipients in this list. Make sure that the recipient of the email that you&#39;re trying to send is a part of this list.",1),Oe=_("<article><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!></article>");function st(ae){_e(ae,ue(fe,{children:(ne,Ue)=>{var U=Oe(),C=ie(U);P(C,{children:(s,i)=>{r();var o=a("Backrush v0.7 and above come with support for easy integrations with 3rd party SMTP providers. In order for emails to work, you will need to set up proper SMTP configuration as described below.");e(s,o)},$$slots:{default:!0}});var L=t(C);P(L,{children:(s,i)=>{r();var o=a("Because email deliverability can be both tricky and hard, it is often easier to delegate this responsibility to a 3rd-party SMTP provider. These providers help you abstract the complexity of passing SPAM filters by doing a lot of the advanced configuration and validation for you.");e(s,o)},$$slots:{default:!0}});var N=t(L);P(N,{children:(s,i)=>{r();var o=a("In this document, you will learn how to connect a 3rd party SMTP provider like MailGun or SendGrid with Backrush to help you get better email deliverability.");e(s,o)},$$slots:{default:!0}});var H=t(N);se(H,{title:"Setting up Backrush Messaging?",children:(s,i)=>{var o=Pe(),m=h(o);P(m,{children:(S,A)=>{r();var u=a("This page describes how to setup messaging for your self-hosted Backrush instance to send email verifications and magic URLs during login.");e(S,u)},$$slots:{default:!0}});var y=t(m);P(y,{children:(S,A)=>{r();var u=he(),w=t(h(u));I(w,{href:"/docs/products/messaging",children:(f,x)=>{r();var b=a("documentation for Backrush Messaging");e(f,b)},$$slots:{default:!0}}),r(),e(S,u)},$$slots:{default:!0}}),e(s,o)}});var W=t(H);oe(W,{id:"environment-variables",level:1,children:(s,i)=>{r();var o=a("Environment variables");e(s,o)},$$slots:{default:!0}});var G=t(W);P(G,{children:(s,i)=>{r();var o=me(),m=t(h(o));I(m,{href:"/docs/advanced/self-hosting",children:(y,S)=>{r();var A=a("Self Hosting Guide");e(y,A)},$$slots:{default:!0}}),r(),e(s,o)},$$slots:{default:!0}});var z=t(G);pe(z,{children:(s,i)=>{var o=be(),m=h(o);ce(m,{children:(S,A)=>{R(S,{children:(u,w)=>{var f=ge(),x=h(f);Y(x,{children:(k,g)=>{r();var T=a("Environment Variable");e(k,T)},$$slots:{default:!0}});var b=t(x);Y(b,{children:(k,g)=>{r();var T=a("Description");e(k,T)},$$slots:{default:!0}});var O=t(b);Y(O,{children:(k,g)=>{r();var T=a("Default Value");e(k,T)},$$slots:{default:!0}}),e(u,f)},$$slots:{default:!0}})},$$slots:{default:!0}});var y=t(m);ve(y,{children:(S,A)=>{var u=xe(),w=h(u);R(w,{children:(g,T)=>{var $=Se(),p=h($);d(p,{children:(n,v)=>{E(n,{content:"_APP_SMTP_HOST"})},$$slots:{default:!0}});var c=t(p);d(c,{children:(n,v)=>{r();var l=a("SMTP server host name address. Use an empty string to disable all mail sending from the server.");e(n,l)},$$slots:{default:!0}});var M=t(c);d(M,{children:(n,v)=>{r();var l=a("Empty string");e(n,l)},$$slots:{default:!0}}),e(g,$)},$$slots:{default:!0}});var f=t(w);R(f,{children:(g,T)=>{var $=ye(),p=h($);d(p,{children:(n,v)=>{E(n,{content:"_APP_SMTP_PORT"})},$$slots:{default:!0}});var c=t(p);d(c,{children:(n,v)=>{r();var l=a("SMTP server TCP port.");e(n,l)},$$slots:{default:!0}});var M=t(c);d(M,{children:(n,v)=>{r();var l=a("Empty");e(n,l)},$$slots:{default:!0}}),e(g,$)},$$slots:{default:!0}});var x=t(f);R(x,{children:(g,T)=>{var $=Ae(),p=h($);d(p,{children:(n,v)=>{E(n,{content:"_APP_SMTP_SECURE"})},$$slots:{default:!0}});var c=t(p);d(c,{children:(n,v)=>{r();var l=a("SMTP secure connection protocol. Change to 'tls' if running on a secure connection. Valid values: empty, 'tls', 'ssl'.");e(n,l)},$$slots:{default:!0}});var M=t(c);d(M,{children:(n,v)=>{r();var l=a("Empty");e(n,l)},$$slots:{default:!0}}),e(g,$)},$$slots:{default:!0}});var b=t(x);R(b,{children:(g,T)=>{var $=Te(),p=h($);d(p,{children:(n,v)=>{E(n,{content:"_APP_SMTP_USERNAME"})},$$slots:{default:!0}});var c=t(p);d(c,{children:(n,v)=>{r();var l=a("SMTP server user name.");e(n,l)},$$slots:{default:!0}});var M=t(c);d(M,{children:(n,v)=>{r();var l=a("Empty");e(n,l)},$$slots:{default:!0}}),e(g,$)},$$slots:{default:!0}});var O=t(b);R(O,{children:(g,T)=>{var $=Me(),p=h($);d(p,{children:(n,v)=>{E(n,{content:"_APP_SMTP_PASSWORD"})},$$slots:{default:!0}});var c=t(p);d(c,{children:(n,v)=>{r();var l=a("SMTP server user password.");e(n,l)},$$slots:{default:!0}});var M=t(c);d(M,{children:(n,v)=>{r();var l=a("Empty");e(n,l)},$$slots:{default:!0}}),e(g,$)},$$slots:{default:!0}});var k=t(O);R(k,{children:(g,T)=>{var $=we(),p=h($);d(p,{children:(n,v)=>{E(n,{content:"_APP_SYSTEM_EMAIL_ADDRESS"})},$$slots:{default:!0}});var c=t(p);d(c,{children:(n,v)=>{r();var l=a("Configured sender email address, seen by recipients.");e(n,l)},$$slots:{default:!0}});var M=t(c);d(M,{children:(n,v)=>{r();var l=a('"team@backrush.io"');e(n,l)},$$slots:{default:!0}}),e(g,$)},$$slots:{default:!0}}),e(S,u)},$$slots:{default:!0}}),e(s,o)},$$slots:{default:!0}});var V=t(z);P(V,{children:(s,i)=>{r();var o=a("Here's a sample configuration if you're using SendGrid as your SMTP provider:");e(s,o)},$$slots:{default:!0}});var F=t(V);D(F,{content:`_APP_SMTP_HOST=smtp.sendgrid.net
_APP_SMTP_PORT=587
_APP_SMTP_SECURE=tls
_APP_SMTP_USERNAME=YOUR-SMTP-USERNAME
_APP_SMTP_PASSWORD=YOUR-SMTP-PASSWORD
_APP_SYSTEM_EMAIL_ADDRESS=YOUR-SENDER-EMAIL
`,language:"sh",process:!0,children:(s,i)=>{r();var o=a(`_APP_SMTP_HOST=smtp.sendgrid.net
_APP_SMTP_PORT=587
_APP_SMTP_SECURE=tls
_APP_SMTP_USERNAME=YOUR-SMTP-USERNAME
_APP_SMTP_PASSWORD=YOUR-SMTP-PASSWORD
_APP_SYSTEM_EMAIL_ADDRESS=YOUR-SENDER-EMAIL`);e(s,o)},$$slots:{default:!0}});var q=t(F);P(q,{children:(s,i)=>{r();var o=a('When using SendGrid, the SMTP username should be set to the literal string "apikey".');e(s,o)},$$slots:{default:!0}});var B=t(q);se(B,{title:"Applying changes",children:(s,i)=>{var o=ke(),m=h(o);P(m,{children:(u,w)=>{r();var f=Ee(),x=t(h(f));E(x,{content:"docker-compose.yml"});var b=t(x,2);E(b,{content:".env"}),r(),e(u,f)},$$slots:{default:!0}});var y=t(m);D(y,{content:`docker compose up -d
`,language:"sh",process:!0,children:(u,w)=>{r();var f=a("docker compose up -d");e(u,f)},$$slots:{default:!0}});var S=t(y);P(S,{children:(u,w)=>{r();var f=a("You can verify if the changes have been successfully applied by running this command:");e(u,f)},$$slots:{default:!0}});var A=t(S);D(A,{content:`docker compose exec backrush vars
`,language:"sh",process:!0,children:(u,w)=>{r();var f=a("docker compose exec backrush vars");e(u,f)},$$slots:{default:!0}}),e(s,o)}});var K=t(B);oe(K,{id:"debugging",level:1,children:(s,i)=>{r();var o=a("Debugging");e(s,o)},$$slots:{default:!0}});var j=t(K);P(j,{children:(s,i)=>{r();var o=Re(),m=t(h(o));$e(m,{marker:"**",children:(y,S)=>{r();var A=a("Backrush Emails Worker");e(y,A)},$$slots:{default:!0}}),r(),e(s,o)},$$slots:{default:!0}});var J=t(j);D(J,{content:`docker compose logs -f backrush-worker-mails
`,language:"sh",process:!0,children:(s,i)=>{r();var o=a("docker compose logs -f backrush-worker-mails");e(s,o)},$$slots:{default:!0}});var Q=t(J);P(Q,{children:(s,i)=>{r();var o=a("The next possible source of error is the configuration in your .env file. Make sure that the keys and values are correct and test the credentials by sending a test email using your SMTP provider's SDK or cURL requests.");e(s,o)},$$slots:{default:!0}});var X=t(Q);P(X,{children:(s,i)=>{r();var o=De(),m=t(h(o));I(m,{href:"https://help.mailgun.com/hc/en-us/articles/217531258-Authorized-Recipients",children:(y,S)=>{r();var A=a("authorized recipients");e(y,A)},$$slots:{default:!0}}),r(),e(s,o)},$$slots:{default:!0}});var Z=t(X);P(Z,{children:(s,i)=>{r();var o=a("Another source of error could be that the environment variables have not been set in the backrush container. You can check this using:");e(s,o)},$$slots:{default:!0}});var ee=t(Z);D(ee,{content:`docker compose exec backrush-worker-mails vars
`,language:"sh",process:!0,children:(s,i)=>{r();var o=a("docker compose exec backrush-worker-mails vars");e(s,o)},$$slots:{default:!0}});var te=t(ee);P(te,{children:(s,i)=>{r();var o=a("If this is the case, you can try rebuilding your backrush stack using:");e(s,o)},$$slots:{default:!0}});var re=t(te);D(re,{content:`docker compose up -d --build --force-recreate
`,language:"sh",process:!0,children:(s,i)=>{r();var o=a("docker compose up -d --build --force-recreate");e(s,o)},$$slots:{default:!0}});var le=t(re);P(le,{children:(s,i)=>{r();var o=a("Now you can head over to your Backrush Console, log out from your account, and try to recover your password or send invites to other team members from your Backrush Console using your newly configured SMTP provider.");e(s,o)},$$slots:{default:!0}}),de(U),e(ne,U)},$$slots:{default:!0}}))}export{st as component};
