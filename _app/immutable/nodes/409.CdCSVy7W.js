import{t as i,b as s,a as t}from"../chunks/Cw4I5osi.js";import"../chunks/BzVk5r6l.js";import{c as gt,s as e,f as d,n as r,r as At}from"../chunks/NgVQVlRK.js";import{n as bt}from"../chunks/B4IyMRKX.js";import{H as C}from"../chunks/CXsRaEhZ.js";import"../chunks/hMT8fFzP.js";import{I as xt}from"../chunks/BypEz2Fd.js";import"../chunks/NwRJ91PD.js";/* empty css                */import"../chunks/BZUG4Puk.js";/* empty css                */import"../chunks/D9bBQFLV.js";import{B as It}from"../chunks/BlhJVlLQ.js";import{C as h}from"../chunks/DXp9_3zM.js";import{F as L}from"../chunks/OFUKRh55.js";import{L as Q,I as F}from"../chunks/BhmTgGWB.js";import{P as I}from"../chunks/D8YsId2T.js";import{S as D}from"../chunks/yHjwcyUH.js";import{L as V}from"../chunks/yh4_9ChP.js";import{T as Z}from"../chunks/D8BqvLkQ.js";import{T as z,a as k,b as K,c as J,d as A}from"../chunks/BpU_IltG.js";import{A as wt}from"../chunks/CqOphJLh.js";const Tt={layout:"article",title:"Functions",description:"Harness the full power of self-hosted functions with Backrush. Explore function deployment, management, and integration in your self-hosted environment."};var yt=i("Backrush supports automatic deployments through Git integration. In order for Backrush to access your repos, you must <!> to enable this integration. The GitHub app requires the following configurations.",1),kt=i("For automatic Git deployment to work, Backrush needs to receive communication from GitHub, this means your Backrush project must be accessible on the internet. If you&#39;re running on <!>, you need to run a proxy like <!>.",1),Nt=i("The GitHub App name will be displayed when connecting Backrush to GitHub. In addition, this name will be transformed to a slug (&quot;My GitHub App&quot; will become &quot;my-github-app&quot;) and appear in the URL when accessing your app in GitHub. This slug should be set as the <!> environment variable in Backrush.",1),Et=i("GitHub will use <!> to redirect users back to Backrush. Set these callback URLs under <!> in the same order as listed below.",1),St=i("<!><!>",1),Ot=i("<!><!>",1),Dt=i("Also, check the <!> box.",1),Ht=i("Check the <!> box under the <!> section.",1),Ct=i("GitHub will notify Backrush about events like new commits using webhooks. Under <!>, you need to check the <!> checkbox. You also need to set the <!> as <!>.",1),Gt=i("If you&#39;re running Backrush on <!>, GitHub can&#39;t send requests to Backrush through webhooks and automatic deployments won&#39;t work. You&#39;ll need to host Backrush on a server or use a proxy like <!> to make Backrush accessible to GitHub.",1),Ut=i("Configure these permissions under the <!> dropdown.",1),Rt=i("<!><!>",1),Mt=i("<!><!>",1),Lt=i("<!><!>",1),Bt=i("<!><!>",1),Vt=i("<!><!>",1),Yt=i("<!><!>",1),Ft=i("<!><!>",1),Kt=i("<!><!>",1),qt=i("<!><!>",1),Wt=i("<!><!><!><!><!><!><!><!>",1),jt=i("<!><!>",1),Qt=i("Configure these permissions under the <!> dropdown.",1),Zt=i("<!><!>",1),zt=i("<!><!>",1),Jt=i("<!><!>",1),Xt=i("Select these under the <!> dropdown.",1),er=i("<!><!>",1),tr=i("<!><!>",1),rr=i("Check the <!> box under <!> section. This is important to allow you to install the GitHub app on multiple Backrush projects.",1),or=i("<!><!>",1),ar=i("Your main Backrush domain used to access the Backrush Console. When setting a public suffix domain, Backrush will attempt to issue a valid SSL certificate automatically. When used with a dev domain, Backrush will assign a self-signed SSL certificate. If you&#39;re using a proxy for <!>, such as <!>, this will be the domain of your localhost proxy.",1),sr=i("<!><!>",1),nr=i("A hostname to serve as a CNAME target for your Backrush custom domains. You can use the same value as used for the Backrush <!> variable. If you&#39;re using a proxy for <!>, such as <!>, this will be the domain of your localhost proxy, such as <!>.",1),lr=i("<!><!>",1),ir=i("This will be used for system generated <!>. When a function domain is generated, it will be <!>. If <!> is set to <!> for example, the generated domain for functions will be something like <!>. You can use the same value as used for the Backrush <!> variable.",1),dr=i("<!><!>",1),$r=i("This will be used for system generated <!>. When a site domain is generated, it will be <!>. If <!> is set to <!> for example, the generated domain for sites will be something like <!>. You can use the same value as used for the Backrush <!> variable.",1),ur=i("<!><!>",1),_r=i("<!><!>",1),cr=i("RSA private key from GitHub wrapped with double quotes and newlines replaced with <!>. You can generate private keys from GitHub application settings.",1),pr=i("<!><!>",1),vr=i("<!><!>",1),fr=i("<!><!>",1),hr=i("<!><!>",1),mr=i("<!><!>",1),Pr=i("<!><!><!><!><!><!><!><!><!><!>",1),gr=i("<!><!>",1),Ar=i("There are additional steps if you&#39;re updating permissions in existing GitHub apps. Every time you update your GitHub app&#39;s permissions, GitHub will prompt you to review the changes. You will receive an email and you&#39;ll find a prompt under <!> &gt; <!> &gt; <!> &gt; <!> &gt; find your GitHub app &gt; <!>. You need to accept the new permissions so they&#39;re applied to your app.",1),br=i("Not all function runtimes are enabled by default. Enable the runtimes that you need and disable unused runtimes to save disk space on your server. To enable a runtime, add it to the <!> environment variable as a comma-separated list.",1),xr=i("You can find a full list of supported runtimes <!>.",1),Ir=i("You can also configure the maximum timeout that can be set on individual Backrush Functions. The maximum configurable timeout can be increased by changing the <!> environment variable. This environment variable changes the configurable maximum but does not alter existing configurations of individual functions.",1),wr=i("After editing your <!> or <!> files, you will need to recreate your Backrush stack by running the following compose command in your terminal.",1),Tr=i("<!><!><!><!>",1),yr=i("Before setting up SSL certificates, ensure you have configured your DNS settings properly. You&#39;ll need to create a CNAME record that points your wildcard function domain (e.g. <!>) to your Backrush domain.",1),kr=i("Backrush does not handle certificates for function domains (e.g. <!>) out of the box, since they require wildcard certificates. There are two ways to handle certificate generation.",1),Nr=i("For automated certificate generation, Backrush uses Traefik&#39;s DNS Challenge feature. This is required for wildcard certificates (like <!>) because Let&#39;s Encrypt uses the DNS-01 challenge to validate wildcard domain ownership.",1),Er=i("To configure Traefik for automated certificate generation with DigitalOcean, you need to modify your <!>:",1),Sr=i("Add the following under the <!> service&#39;s <!> section.",1),Or=i("Add environment variables under the <!> service.",1),Dr=i("Add the following <!> under the <!> service.",1),Hr=i("Ensure these environment variables are properly configured in your <!> file before proceeding:",1),Cr=i("<!> must be set to a valid email for Let&#39;s Encrypt notifications",1),Gr=i("<!> must be correctly set to your function domain (e.g., <!>)",1),Ur=i("<!> must be set to a valid DigitalOcean API token (generate this in the DigitalOcean Console)",1),Rr=i("<!><!><!>",1),Mr=i("<!><!>",1),Lr=i("<!><!>",1),Br=i("A common issue is DNS propagation delays. If the logs show DNS verification failures, you can configure longer timeouts in your <!> under the <!> service.",1),Vr=i("For other DNS providers, refer to <!>.",1),Yr=i("<article><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!></article>");function po(ft){wt(ft,bt(Tt,{children:(ht,Fr)=>{var X=Yr(),te=gt(X);C(te,{id:"git",level:1,children:(a,$)=>{r();var o=s("Configure GitHub app");t(a,o)},$$slots:{default:!0}});var re=e(te);I(re,{children:(a,$)=>{r();var o=yt(),n=e(d(o));V(n,{href:"https://docs.github.com/en/apps/creating-github-apps/about-creating-github-apps/about-creating-github-apps",children:(p,u)=>{r();var P=s("create a GitHub app");t(p,P)},$$slots:{default:!0}}),r(),t(a,o)},$$slots:{default:!0}});var oe=e(re);I(oe,{children:(a,$)=>{r();var o=kt(),n=e(d(o));h(n,{content:"localhost"});var p=e(n,2);V(p,{href:"https://ngrok.com/",children:(u,P)=>{r();var c=s("ngrok");t(u,c)},$$slots:{default:!0}}),r(),t(a,o)},$$slots:{default:!0}});var ae=e(oe);C(ae,{id:"github-app-name",level:2,children:(a,$)=>{r();var o=s("GitHub App name");t(a,o)},$$slots:{default:!0}});var se=e(ae);I(se,{children:(a,$)=>{r();var o=Nt(),n=e(d(o));h(n,{content:"_APP_VCS_GITHUB_APP_NAME"}),r(),t(a,o)},$$slots:{default:!0}});var ne=e(se);C(ne,{id:"github-homepage-url",level:2,children:(a,$)=>{r();var o=s("Homepage URL");t(a,o)},$$slots:{default:!0}});var le=e(ne);I(le,{children:(a,$)=>{r();var o=s("The homepage URL will appear when looking at the public page of your app. It can be any URL you'd like.");t(a,o)},$$slots:{default:!0}});var ie=e(le);C(ie,{id:"callback",level:2,children:(a,$)=>{r();var o=s("Callback URL");t(a,o)},$$slots:{default:!0}});var de=e(ie);I(de,{children:(a,$)=>{r();var o=Et(),n=e(d(o));D(n,{marker:"**",children:(u,P)=>{r();var c=s("callback URLs");t(u,c)},$$slots:{default:!0}});var p=e(n,2);D(p,{marker:"**",children:(u,P)=>{r();var c=s("Identifying and authorizing users");t(u,c)},$$slots:{default:!0}}),r(),t(a,o)},$$slots:{default:!0}});var $e=e(de);Z($e,{children:(a,$)=>{var o=Ot(),n=d(o);z(n,{children:(u,P)=>{k(u,{children:(c,x)=>{K(c,{children:(f,g)=>{r();var N=s("URLs");t(f,N)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}});var p=e(n);J(p,{children:(u,P)=>{var c=St(),x=d(c);k(x,{children:(g,N)=>{A(g,{children:(w,O)=>{h(w,{content:"https://<HOSTNAME_OR_IP>/v1/vcs/github/callback"})},$$slots:{default:!0}})},$$slots:{default:!0}});var f=e(x);k(f,{children:(g,N)=>{A(g,{children:(w,O)=>{h(w,{content:"https://<HOSTNAME_OR_IP>/v1/account/sessions/oauth2/callback/github/console"})},$$slots:{default:!0}})},$$slots:{default:!0}}),t(u,c)},$$slots:{default:!0}}),t(a,o)},$$slots:{default:!0}});var ue=e($e);I(ue,{children:(a,$)=>{r();var o=Dt(),n=e(d(o));D(n,{marker:"**",children:(p,u)=>{r();var P=s("Request user authentication (OAuth) during installation");t(p,P)},$$slots:{default:!0}}),r(),t(a,o)},$$slots:{default:!0}});var _e=e(ue);C(_e,{id:"post-install",level:2,children:(a,$)=>{r();var o=s("Post installation");t(a,o)},$$slots:{default:!0}});var ce=e(_e);I(ce,{children:(a,$)=>{r();var o=Ht(),n=e(d(o));D(n,{marker:"**",children:(u,P)=>{r();var c=s("Redirect on update");t(u,c)},$$slots:{default:!0}});var p=e(n,2);D(p,{marker:"**",children:(u,P)=>{r();var c=s("Post installation");t(u,c)},$$slots:{default:!0}}),r(),t(a,o)},$$slots:{default:!0}});var pe=e(ce);C(pe,{id:"github-webhooks",level:2,children:(a,$)=>{r();var o=s("Webhook");t(a,o)},$$slots:{default:!0}});var ve=e(pe);I(ve,{children:(a,$)=>{r();var o=Ct(),n=e(d(o));D(n,{marker:"**",children:(c,x)=>{r();var f=s("Webhook");t(c,f)},$$slots:{default:!0}});var p=e(n,2);D(p,{marker:"**",children:(c,x)=>{r();var f=s("Active");t(c,f)},$$slots:{default:!0}});var u=e(p,2);D(u,{marker:"**",children:(c,x)=>{r();var f=s("Webhook URL");t(c,f)},$$slots:{default:!0}});var P=e(u,2);h(P,{content:"https://<HOSTNAME_OR_IP>/v1/vcs/github/events"}),r(),t(a,o)},$$slots:{default:!0}});var fe=e(ve);I(fe,{children:(a,$)=>{r();var o=Gt(),n=e(d(o));h(n,{content:"localhost"});var p=e(n,2);V(p,{href:"https://ngrok.com/",children:(u,P)=>{r();var c=s("ngrok");t(u,c)},$$slots:{default:!0}}),r(),t(a,o)},$$slots:{default:!0}});var he=e(fe);C(he,{id:"repository-permission",level:2,children:(a,$)=>{r();var o=s("Repository permissions");t(a,o)},$$slots:{default:!0}});var me=e(he);I(me,{children:(a,$)=>{r();var o=Ut(),n=e(d(o));D(n,{marker:"**",children:(p,u)=>{r();var P=s("Repository permission");t(p,P)},$$slots:{default:!0}}),r(),t(a,o)},$$slots:{default:!0}});var Pe=e(me);Z(Pe,{children:(a,$)=>{var o=jt(),n=d(o);z(n,{children:(u,P)=>{k(u,{children:(c,x)=>{var f=Rt(),g=d(f);K(g,{children:(w,O)=>{r();var y=s("Permission");t(w,y)},$$slots:{default:!0}});var N=e(g);K(N,{children:(w,O)=>{r();var y=s("Access");t(w,y)},$$slots:{default:!0}}),t(c,f)},$$slots:{default:!0}})},$$slots:{default:!0}});var p=e(n);J(p,{children:(u,P)=>{var c=Wt(),x=d(c);k(x,{children:(E,R)=>{var v=Mt(),b=d(v);A(b,{children:(_,T)=>{r();var l=s("Administration");t(_,l)},$$slots:{default:!0}});var m=e(b);A(m,{children:(_,T)=>{r();var l=s("Read and write");t(_,l)},$$slots:{default:!0}}),t(E,v)},$$slots:{default:!0}});var f=e(x);k(f,{children:(E,R)=>{var v=Lt(),b=d(v);A(b,{children:(_,T)=>{r();var l=s("Checks");t(_,l)},$$slots:{default:!0}});var m=e(b);A(m,{children:(_,T)=>{r();var l=s("Read and write");t(_,l)},$$slots:{default:!0}}),t(E,v)},$$slots:{default:!0}});var g=e(f);k(g,{children:(E,R)=>{var v=Bt(),b=d(v);A(b,{children:(_,T)=>{r();var l=s("Commit Statuses");t(_,l)},$$slots:{default:!0}});var m=e(b);A(m,{children:(_,T)=>{r();var l=s("Read and write");t(_,l)},$$slots:{default:!0}}),t(E,v)},$$slots:{default:!0}});var N=e(g);k(N,{children:(E,R)=>{var v=Vt(),b=d(v);A(b,{children:(_,T)=>{r();var l=s("Contents");t(_,l)},$$slots:{default:!0}});var m=e(b);A(m,{children:(_,T)=>{r();var l=s("Read and write");t(_,l)},$$slots:{default:!0}}),t(E,v)},$$slots:{default:!0}});var w=e(N);k(w,{children:(E,R)=>{var v=Yt(),b=d(v);A(b,{children:(_,T)=>{r();var l=s("Issues");t(_,l)},$$slots:{default:!0}});var m=e(b);A(m,{children:(_,T)=>{r();var l=s("Read and write");t(_,l)},$$slots:{default:!0}}),t(E,v)},$$slots:{default:!0}});var O=e(w);k(O,{children:(E,R)=>{var v=Ft(),b=d(v);A(b,{children:(_,T)=>{r();var l=s("Metadata");t(_,l)},$$slots:{default:!0}});var m=e(b);A(m,{children:(_,T)=>{r();var l=s("Read-only");t(_,l)},$$slots:{default:!0}}),t(E,v)},$$slots:{default:!0}});var y=e(O);k(y,{children:(E,R)=>{var v=Kt(),b=d(v);A(b,{children:(_,T)=>{r();var l=s("Pull requests");t(_,l)},$$slots:{default:!0}});var m=e(b);A(m,{children:(_,T)=>{r();var l=s("Read and write");t(_,l)},$$slots:{default:!0}}),t(E,v)},$$slots:{default:!0}});var W=e(y);k(W,{children:(E,R)=>{var v=qt(),b=d(v);A(b,{children:(_,T)=>{r();var l=s("Webhooks");t(_,l)},$$slots:{default:!0}});var m=e(b);A(m,{children:(_,T)=>{r();var l=s("Read and write");t(_,l)},$$slots:{default:!0}}),t(E,v)},$$slots:{default:!0}}),t(u,c)},$$slots:{default:!0}}),t(a,o)},$$slots:{default:!0}});var ge=e(Pe);C(ge,{id:"account-permission",level:2,children:(a,$)=>{r();var o=s("Account permissions");t(a,o)},$$slots:{default:!0}});var Ae=e(ge);I(Ae,{children:(a,$)=>{r();var o=Qt(),n=e(d(o));D(n,{marker:"**",children:(p,u)=>{r();var P=s("Account Permission");t(p,P)},$$slots:{default:!0}}),r(),t(a,o)},$$slots:{default:!0}});var be=e(Ae);Z(be,{children:(a,$)=>{var o=Jt(),n=d(o);z(n,{children:(u,P)=>{k(u,{children:(c,x)=>{var f=Zt(),g=d(f);K(g,{children:(w,O)=>{r();var y=s("Permission");t(w,y)},$$slots:{default:!0}});var N=e(g);K(N,{children:(w,O)=>{r();var y=s("Access");t(w,y)},$$slots:{default:!0}}),t(c,f)},$$slots:{default:!0}})},$$slots:{default:!0}});var p=e(n);J(p,{children:(u,P)=>{k(u,{children:(c,x)=>{var f=zt(),g=d(f);A(g,{children:(w,O)=>{r();var y=s("Email address");t(w,y)},$$slots:{default:!0}});var N=e(g);A(N,{children:(w,O)=>{r();var y=s("Read-only");t(w,y)},$$slots:{default:!0}}),t(c,f)},$$slots:{default:!0}})},$$slots:{default:!0}}),t(a,o)},$$slots:{default:!0}});var xe=e(be);C(xe,{id:"subscribe-events",level:2,children:(a,$)=>{r();var o=s("Subscribe to events");t(a,o)},$$slots:{default:!0}});var Ie=e(xe);I(Ie,{children:(a,$)=>{r();var o=Xt(),n=e(d(o));D(n,{marker:"**",children:(p,u)=>{r();var P=s("Subscribe to events");t(p,P)},$$slots:{default:!0}}),r(),t(a,o)},$$slots:{default:!0}});var we=e(Ie);Z(we,{children:(a,$)=>{var o=tr(),n=d(o);z(n,{children:(u,P)=>{k(u,{children:(c,x)=>{K(c,{children:(f,g)=>{r();var N=s("Events");t(f,N)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}});var p=e(n);J(p,{children:(u,P)=>{var c=er(),x=d(c);k(x,{children:(g,N)=>{A(g,{children:(w,O)=>{r();var y=s("Pull request");t(w,y)},$$slots:{default:!0}})},$$slots:{default:!0}});var f=e(x);k(f,{children:(g,N)=>{A(g,{children:(w,O)=>{r();var y=s("Push");t(w,y)},$$slots:{default:!0}})},$$slots:{default:!0}}),t(u,c)},$$slots:{default:!0}}),t(a,o)},$$slots:{default:!0}});var Te=e(we);C(Te,{id:"github-where-installed",level:2,children:(a,$)=>{r();var o=s("Where can this GitHub App be installed?");t(a,o)},$$slots:{default:!0}});var ye=e(Te);I(ye,{children:(a,$)=>{r();var o=rr(),n=e(d(o));D(n,{marker:"**",children:(u,P)=>{r();var c=s("Any account");t(u,c)},$$slots:{default:!0}});var p=e(n,2);D(p,{marker:"**",children:(u,P)=>{r();var c=s("Where can this GitHub App be installed?");t(u,c)},$$slots:{default:!0}}),r(),t(a,o)},$$slots:{default:!0}});var ke=e(ye);C(ke,{id:"github-variables",level:2,children:(a,$)=>{r();var o=s("Environment variables");t(a,o)},$$slots:{default:!0}});var Ne=e(ke);I(Ne,{children:(a,$)=>{r();var o=s("After creating your app, you'll have to configure the following environment variables.");t(a,o)},$$slots:{default:!0}});var Ee=e(Ne);Z(Ee,{children:(a,$)=>{var o=gr(),n=d(o);z(n,{children:(u,P)=>{k(u,{children:(c,x)=>{var f=or(),g=d(f);K(g,{children:(w,O)=>{r();var y=s("Variable");t(w,y)},$$slots:{default:!0}});var N=e(g);K(N,{children:(w,O)=>{r();var y=s("Description");t(w,y)},$$slots:{default:!0}}),t(c,f)},$$slots:{default:!0}})},$$slots:{default:!0}});var p=e(n);J(p,{children:(u,P)=>{var c=Pr(),x=d(c);k(x,{children:(v,b)=>{var m=sr(),_=d(m);A(_,{children:(l,H)=>{h(l,{content:"_APP_DOMAIN"})},$$slots:{default:!0}});var T=e(_);A(T,{children:(l,H)=>{r();var S=ar(),G=e(d(S));D(G,{marker:"**",children:(M,Y)=>{r();var U=s("localhost development");t(M,U)},$$slots:{default:!0}});var B=e(G,2);V(B,{href:"https://ngrok.com/",children:(M,Y)=>{r();var U=s("ngrok");t(M,U)},$$slots:{default:!0}}),r(),t(l,S)},$$slots:{default:!0}}),t(v,m)},$$slots:{default:!0}});var f=e(x);k(f,{children:(v,b)=>{var m=lr(),_=d(m);A(_,{children:(l,H)=>{h(l,{content:"_APP_DOMAIN_TARGET"})},$$slots:{default:!0}});var T=e(_);A(T,{children:(l,H)=>{r();var S=nr(),G=e(d(S));h(G,{content:"_APP_DOMAIN"});var B=e(G,2);D(B,{marker:"**",children:(U,j)=>{r();var q=s("localhost development");t(U,q)},$$slots:{default:!0}});var M=e(B,2);V(M,{href:"https://ngrok.com/",children:(U,j)=>{r();var q=s("ngrok");t(U,q)},$$slots:{default:!0}});var Y=e(M,2);h(Y,{content:"dd65-2405-201-4013-d8d7-b4c5-fb73-39f9-285c.ngrok.io"}),r(),t(l,S)},$$slots:{default:!0}}),t(v,m)},$$slots:{default:!0}});var g=e(f);k(g,{children:(v,b)=>{var m=dr(),_=d(m);A(_,{children:(l,H)=>{h(l,{content:"_APP_DOMAIN_FUNCTIONS"})},$$slots:{default:!0}});var T=e(_);A(T,{children:(l,H)=>{r();var S=ir(),G=e(d(S));V(G,{href:"/docs/products/functions/domains",children:(q,Pt)=>{r();var ee=s("Function Domains");t(q,ee)},$$slots:{default:!0}});var B=e(G,2);h(B,{content:"[UNIQUE_ID].[_APP_DOMAIN_FUNCTIONS]"});var M=e(B,2);h(M,{content:"_APP_DOMAIN_FUNCTIONS"});var Y=e(M,2);h(Y,{content:"example.com"});var U=e(Y,2);h(U,{content:"64d4d22db370ae41a32e.example.com"});var j=e(U,2);h(j,{content:"_APP_DOMAIN"}),r(),t(l,S)},$$slots:{default:!0}}),t(v,m)},$$slots:{default:!0}});var N=e(g);k(N,{children:(v,b)=>{var m=ur(),_=d(m);A(_,{children:(l,H)=>{h(l,{content:"_APP_DOMAIN_SITES"})},$$slots:{default:!0}});var T=e(_);A(T,{children:(l,H)=>{r();var S=$r(),G=e(d(S));V(G,{href:"/docs/products/sites/domains",children:(q,Pt)=>{r();var ee=s("Site Domains");t(q,ee)},$$slots:{default:!0}});var B=e(G,2);h(B,{content:"[UNIQUE_ID].[_APP_DOMAIN_SITES]"});var M=e(B,2);h(M,{content:"_APP_DOMAIN_SITES"});var Y=e(M,2);h(Y,{content:"example.com"});var U=e(Y,2);h(U,{content:"64d4d22db370ae41a32e.example.com"});var j=e(U,2);h(j,{content:"_APP_DOMAIN"}),r(),t(l,S)},$$slots:{default:!0}}),t(v,m)},$$slots:{default:!0}});var w=e(N);k(w,{children:(v,b)=>{var m=_r(),_=d(m);A(_,{children:(l,H)=>{h(l,{content:"_APP_VCS_GITHUB_APP_NAME"})},$$slots:{default:!0}});var T=e(_);A(T,{children:(l,H)=>{r();var S=s("Name of your GitHub app. This is the display name you'll see on GitHub and it will be visible in your GitHub app's URL.");t(l,S)},$$slots:{default:!0}}),t(v,m)},$$slots:{default:!0}});var O=e(w);k(O,{children:(v,b)=>{var m=pr(),_=d(m);A(_,{children:(l,H)=>{h(l,{content:"_APP_VCS_GITHUB_PRIVATE_KEY"})},$$slots:{default:!0}});var T=e(_);A(T,{children:(l,H)=>{r();var S=cr(),G=e(d(S));h(G,{content:"\\n"}),r(),t(l,S)},$$slots:{default:!0}}),t(v,m)},$$slots:{default:!0}});var y=e(O);k(y,{children:(v,b)=>{var m=vr(),_=d(m);A(_,{children:(l,H)=>{h(l,{content:"_APP_VCS_GITHUB_APP_ID"})},$$slots:{default:!0}});var T=e(_);A(T,{children:(l,H)=>{r();var S=s("GitHub application ID. You can find it in your GitHub application details.");t(l,S)},$$slots:{default:!0}}),t(v,m)},$$slots:{default:!0}});var W=e(y);k(W,{children:(v,b)=>{var m=fr(),_=d(m);A(_,{children:(l,H)=>{h(l,{content:"_APP_VCS_GITHUB_CLIENT_ID"})},$$slots:{default:!0}});var T=e(_);A(T,{children:(l,H)=>{r();var S=s("GitHub client ID. You can find it in your GitHub application details.");t(l,S)},$$slots:{default:!0}}),t(v,m)},$$slots:{default:!0}});var E=e(W);k(E,{children:(v,b)=>{var m=hr(),_=d(m);A(_,{children:(l,H)=>{h(l,{content:"_APP_VCS_GITHUB_CLIENT_SECRET"})},$$slots:{default:!0}});var T=e(_);A(T,{children:(l,H)=>{r();var S=s("GitHub client secret. You can generate secrets in your GitHub application settings.");t(l,S)},$$slots:{default:!0}}),t(v,m)},$$slots:{default:!0}});var R=e(E);k(R,{children:(v,b)=>{var m=mr(),_=d(m);A(_,{children:(l,H)=>{h(l,{content:"_APP_VCS_GITHUB_WEBHOOK_SECRET"})},$$slots:{default:!0}});var T=e(_);A(T,{children:(l,H)=>{r();var S=s("GitHub webhook secret. You can configure it in your GitHub application settings under webhook section.");t(l,S)},$$slots:{default:!0}}),t(v,m)},$$slots:{default:!0}}),t(u,c)},$$slots:{default:!0}}),t(a,o)},$$slots:{default:!0}});var Se=e(Ee);I(Se,{children:(a,$)=>{r();var o=s("For example, see below.");t(a,o)},$$slots:{default:!0}});var Oe=e(Se);L(Oe,{content:`_APP_DOMAIN=appwrite.example.com
_APP_DOMAIN_TARGET=appwrite.example.com
_APP_DOMAIN_FUNCTIONS=functions.example.com
_APP_VCS_GITHUB_APP_NAME=my-github-app
_APP_VCS_GITHUB_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\\nMIIEogIBAAKCAQEAuT8f3lo/X83hfvb0ZN/KD2pl86o/jl3ywKrkj/PQZBmtEv/z\\nIugE//sfFoHWc4cizkcji+n3FNU+GEdvMioKuJlPBqPTY8hAbVn7R0geZLpDV/rs\\n[...]\\n-----END RSA PRIVATE KEY-----"
_APP_VCS_GITHUB_APP_ID=12415
_APP_VCS_GITHUB_CLIENT_ID=Iv1.35asdf43asd
_APP_VCS_GITHUB_CLIENT_SECRET=35rsdse532q13
_APP_VCS_GITHUB_WEBHOOK_SECRET=super-secret
`,language:"bash",process:!0,children:(a,$)=>{r();var o=s(`_APP_DOMAIN=appwrite.example.com
_APP_DOMAIN_TARGET=appwrite.example.com
_APP_DOMAIN_FUNCTIONS=functions.example.com
_APP_VCS_GITHUB_APP_NAME=my-github-app
_APP_VCS_GITHUB_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\\nMIIEogIBAAKCAQEAuT8f3lo/X83hfvb0ZN/KD2pl86o/jl3ywKrkj/PQZBmtEv/z\\nIugE//sfFoHWc4cizkcji+n3FNU+GEdvMioKuJlPBqPTY8hAbVn7R0geZLpDV/rs\\n[...]\\n-----END RSA PRIVATE KEY-----"
_APP_VCS_GITHUB_APP_ID=12415
_APP_VCS_GITHUB_CLIENT_ID=Iv1.35asdf43asd
_APP_VCS_GITHUB_CLIENT_SECRET=35rsdse532q13
_APP_VCS_GITHUB_WEBHOOK_SECRET=super-secret`);t(a,o)},$$slots:{default:!0}});var De=e(Oe);I(De,{children:(a,$)=>{V(a,{href:"/docs/advanced/self-hosting/environment-variables",children:(o,n)=>{r();var p=s("Learn more about environment variables");t(o,p)},$$slots:{default:!0}})},$$slots:{default:!0}});var He=e(De);C(He,{id:"existing-apps",level:2,children:(a,$)=>{r();var o=s("Update existing GitHub apps");t(a,o)},$$slots:{default:!0}});var Ce=e(He);I(Ce,{children:(a,$)=>{r();var o=Ar(),n=e(d(o));D(n,{marker:"**",children:(x,f)=>{r();var g=s("Settings");t(x,g)},$$slots:{default:!0}});var p=e(n,2);D(p,{marker:"**",children:(x,f)=>{r();var g=s("Integrations");t(x,g)},$$slots:{default:!0}});var u=e(p,2);D(u,{marker:"**",children:(x,f)=>{r();var g=s("Applications");t(x,g)},$$slots:{default:!0}});var P=e(u,2);D(P,{marker:"**",children:(x,f)=>{r();var g=s("Installed GitHub Apps");t(x,g)},$$slots:{default:!0}});var c=e(P,2);D(c,{marker:"**",children:(x,f)=>{r();var g=s("Configure");t(x,g)},$$slots:{default:!0}}),r(),t(a,o)},$$slots:{default:!0}});var Ge=e(Ce);C(Ge,{id:"functions",level:1,children:(a,$)=>{r();var o=s("Configure Function runtimes");t(a,o)},$$slots:{default:!0}});var Ue=e(Ge);I(Ue,{children:(a,$)=>{r();var o=br(),n=e(d(o));h(n,{content:"_APP_FUNCTIONS_RUNTIMES"}),r(),t(a,o)},$$slots:{default:!0}});var Re=e(Ue);I(Re,{children:(a,$)=>{r();var o=s("The example below would enable Dart 2.15, .NET 6.0, and Java 18 runtimes.");t(a,o)},$$slots:{default:!0}});var Me=e(Re);L(Me,{content:`_APP_FUNCTIONS_RUNTIMES=dart-2.15,dotnet-6.0,java-18.0
`,language:"bash",process:!0,children:(a,$)=>{r();var o=s("_APP_FUNCTIONS_RUNTIMES=dart-2.15,dotnet-6.0,java-18.0");t(a,o)},$$slots:{default:!0}});var Le=e(Me);I(Le,{children:(a,$)=>{r();var o=xr(),n=e(d(o));V(n,{href:"/docs/products/functions/runtimes#available-runtimes",children:(p,u)=>{r();var P=s("here");t(p,P)},$$slots:{default:!0}}),r(),t(a,o)},$$slots:{default:!0}});var Be=e(Le);I(Be,{children:(a,$)=>{r();var o=Ir(),n=e(d(o));h(n,{content:"_APP_FUNCTIONS_TIMEOUT"}),r(),t(a,o)},$$slots:{default:!0}});var Ve=e(Be);xt(Ve,{title:"Applying changes",children:(a,$)=>{var o=Tr(),n=d(o);I(n,{children:(c,x)=>{r();var f=wr(),g=e(d(f));h(g,{content:"docker-compose.yml"});var N=e(g,2);h(N,{content:".env"}),r(),t(c,f)},$$slots:{default:!0}});var p=e(n);L(p,{content:`docker compose up -d
`,language:"sh",process:!0,children:(c,x)=>{r();var f=s("docker compose up -d");t(c,f)},$$slots:{default:!0}});var u=e(p);I(u,{children:(c,x)=>{r();var f=s("You can verify if the changes have been successfully applied by running this command:");t(c,f)},$$slots:{default:!0}});var P=e(u);L(P,{content:`docker compose exec appwrite vars
`,language:"sh",process:!0,children:(c,x)=>{r();var f=s("docker compose exec appwrite vars");t(c,f)},$$slots:{default:!0}}),t(a,o)}});var Ye=e(Ve);C(Ye,{id:"ssl-certificates",level:1,children:(a,$)=>{r();var o=s("SSL certificates for Function domains");t(a,o)},$$slots:{default:!0}});var Fe=e(Ye);I(Fe,{children:(a,$)=>{r();var o=yr(),n=e(d(o));h(n,{content:"*.functions.appwrite.myapp.com"}),r(),t(a,o)},$$slots:{default:!0}});var Ke=e(Fe);I(Ke,{children:(a,$)=>{r();var o=kr(),n=e(d(o));h(n,{content:"6772722a00331315adc3.functions.appwrite.myapp.com"}),r(),t(a,o)},$$slots:{default:!0}});var qe=e(Ke);C(qe,{level:2,children:(a,$)=>{r();var o=s("Manual certificate generation");t(a,o)},$$slots:{default:!0}});var We=e(qe);I(We,{children:(a,$)=>{r();var o=s("The simplest way to generate certificates for function domains is to use the Backrush SSL command.");t(a,o)},$$slots:{default:!0}});var je=e(We);L(je,{content:`docker compose exec appwrite ssl --domain="6772722a00331315adc3.functions.appwrite.myapp.com"
`,language:"bash",process:!0,children:(a,$)=>{r();var o=s('docker compose exec appwrite ssl --domain="6772722a00331315adc3.functions.appwrite.myapp.com"');t(a,o)},$$slots:{default:!0}});var Qe=e(je);I(Qe,{children:(a,$)=>{r();var o=s("The certificate should be generated within a few seconds. If you encounter any issues, you can check the certificate worker logs.");t(a,o)},$$slots:{default:!0}});var Ze=e(Qe);L(Ze,{content:`docker compose logs appwrite-worker-certificates
`,language:"bash",process:!0,children:(a,$)=>{r();var o=s("docker compose logs appwrite-worker-certificates");t(a,o)},$$slots:{default:!0}});var ze=e(Ze);I(ze,{children:(a,$)=>{r();var o=s("Note that you'll need to run this command for each function domain, and repeat it every time you create a new function. If you have many functions or frequently create new ones, consider using the automated certificate generation method below.");t(a,o)},$$slots:{default:!0}});var Je=e(ze);C(Je,{level:2,children:(a,$)=>{r();var o=s("Automated certificate generation");t(a,o)},$$slots:{default:!0}});var Xe=e(Je);I(Xe,{children:(a,$)=>{r();var o=Nr(),n=e(d(o));h(n,{content:"*.functions.appwrite.myapp.com"}),r(),t(a,o)},$$slots:{default:!0}});var et=e(Xe);C(et,{level:3,children:(a,$)=>{r();var o=s("Using DNS challenge with DigitalOcean");t(a,o)},$$slots:{default:!0}});var tt=e(et);I(tt,{children:(a,$)=>{r();var o=Er(),n=e(d(o));h(n,{content:"docker-compose.yml"}),r(),t(a,o)},$$slots:{default:!0}});var rt=e(tt);Q(rt,{ordered:!0,marker:".",children:(a,$)=>{F(a,{children:(o,n)=>{r();var p=Sr(),u=e(d(p));h(u,{content:"traefik"});var P=e(u,2);h(P,{content:"command"}),r(),t(o,p)},$$slots:{default:!0}})},$$slots:{default:!0}});var ot=e(rt);L(ot,{content:`command:
    # ... existing commands ...
    - --certificatesresolvers.digitalocean.acme.dnschallenge=true
    - --certificatesresolvers.digitalocean.acme.dnschallenge.provider=digitalocean
    - --certificatesresolvers.digitalocean.acme.email=$_APP_SYSTEM_SECURITY_EMAIL_ADDRESS
    - --certificatesresolvers.digitalocean.acme.storage=/storage/certificates/digitalocean.json
`,language:"yaml",process:!0,children:(a,$)=>{r();var o=s(`command:
    # ... existing commands ...
    - --certificatesresolvers.digitalocean.acme.dnschallenge=true
    - --certificatesresolvers.digitalocean.acme.dnschallenge.provider=digitalocean
    - --certificatesresolvers.digitalocean.acme.email=$_APP_SYSTEM_SECURITY_EMAIL_ADDRESS
    - --certificatesresolvers.digitalocean.acme.storage=/storage/certificates/digitalocean.json`);t(a,o)},$$slots:{default:!0}});var at=e(ot);Q(at,{ordered:!0,start:2,marker:".",children:(a,$)=>{F(a,{children:(o,n)=>{r();var p=Or(),u=e(d(p));h(u,{content:"traefik"}),r(),t(o,p)},$$slots:{default:!0}})},$$slots:{default:!0}});var st=e(at);L(st,{content:`environment:
    - DO_AUTH_TOKEN=$_APP_DOMAIN_DO_TOKEN
`,language:"yaml",process:!0,children:(a,$)=>{r();var o=s(`environment:
    - DO_AUTH_TOKEN=$_APP_DOMAIN_DO_TOKEN`);t(a,o)},$$slots:{default:!0}});var nt=e(st);Q(nt,{ordered:!0,start:3,marker:".",children:(a,$)=>{F(a,{children:(o,n)=>{r();var p=Dr(),u=e(d(p));h(u,{content:"labels"});var P=e(u,2);h(P,{content:"appwrite"}),r(),t(o,p)},$$slots:{default:!0}})},$$slots:{default:!0}});var lt=e(nt);L(lt,{content:`labels:
    # ... existing labels ...
    - traefik.http.routers.appwrite_api_https.tls.certresolver=digitalocean
    - traefik.http.routers.appwrite_api_https.tls.domains[0].main=$_APP_DOMAIN_FUNCTIONS
    - traefik.http.routers.appwrite_api_https.tls.domains[0].sans=*.$_APP_DOMAIN_FUNCTIONS
`,language:"yaml",process:!0,children:(a,$)=>{r();var o=s(`labels:
    # ... existing labels ...
    - traefik.http.routers.appwrite_api_https.tls.certresolver=digitalocean
    - traefik.http.routers.appwrite_api_https.tls.domains[0].main=$_APP_DOMAIN_FUNCTIONS
    - traefik.http.routers.appwrite_api_https.tls.domains[0].sans=*.$_APP_DOMAIN_FUNCTIONS`);t(a,o)},$$slots:{default:!0}});var it=e(lt);Q(it,{ordered:!0,start:4,marker:".",children:(a,$)=>{var o=Lr(),n=d(o);F(n,{children:(u,P)=>{var c=Mr(),x=d(c);I(x,{children:(g,N)=>{r();var w=Hr(),O=e(d(w));h(O,{content:".env"}),r(),t(g,w)},$$slots:{default:!0}});var f=e(x);Q(f,{ordered:!1,marker:"-",children:(g,N)=>{var w=Rr(),O=d(w);F(O,{children:(E,R)=>{var v=Cr(),b=d(v);h(b,{content:"_APP_SYSTEM_SECURITY_EMAIL_ADDRESS"}),r(),t(E,v)},$$slots:{default:!0}});var y=e(O);F(y,{children:(E,R)=>{var v=Gr(),b=d(v);h(b,{content:"_APP_DOMAIN_FUNCTIONS"});var m=e(b,2);h(m,{content:"functions.example.com"}),r(),t(E,v)},$$slots:{default:!0}});var W=e(y);F(W,{children:(E,R)=>{var v=Ur(),b=d(v);h(b,{content:"_APP_DOMAIN_DO_TOKEN"}),r(),t(E,v)},$$slots:{default:!0}}),t(g,w)},$$slots:{default:!0}}),t(u,c)},$$slots:{default:!0}});var p=e(n);F(p,{children:(u,P)=>{I(u,{children:(c,x)=>{r();var f=s("Apply the changes.");t(c,f)},$$slots:{default:!0}})},$$slots:{default:!0}}),t(a,o)},$$slots:{default:!0}});var dt=e(it);L(dt,{content:`docker compose up -d --force-recreate
`,language:"bash",process:!0,children:(a,$)=>{r();var o=s("docker compose up -d --force-recreate");t(a,o)},$$slots:{default:!0}});var $t=e(dt);C($t,{level:3,children:(a,$)=>{r();var o=s("Troubleshooting DNS Propagation");t(a,o)},$$slots:{default:!0}});var ut=e($t);I(ut,{children:(a,$)=>{r();var o=s("If certificate generation fails, first check the Traefik logs to identify the specific issue.");t(a,o)},$$slots:{default:!0}});var _t=e(ut);L(_t,{content:`docker compose logs traefik
`,language:"bash",process:!0,children:(a,$)=>{r();var o=s("docker compose logs traefik");t(a,o)},$$slots:{default:!0}});var ct=e(_t);I(ct,{children:(a,$)=>{r();var o=Br(),n=e(d(o));h(n,{content:"docker-compose.yml"});var p=e(n,2);h(p,{content:"traefik"}),r(),t(a,o)},$$slots:{default:!0}});var pt=e(ct);L(pt,{content:`environment:
    - DO_AUTH_TOKEN=$_APP_DOMAIN_DO_TOKEN
    - DO_POLLING_INTERVAL=1m
    - DO_PROPAGATION_TIMEOUT=1h
`,language:"yaml",process:!0,children:(a,$)=>{r();var o=s(`environment:
    - DO_AUTH_TOKEN=$_APP_DOMAIN_DO_TOKEN
    - DO_POLLING_INTERVAL=1m
    - DO_PROPAGATION_TIMEOUT=1h`);t(a,o)},$$slots:{default:!0}});var vt=e(pt);It(vt,{children:(a,$)=>{I(a,{children:(o,n)=>{r();var p=s("Note: Let's Encrypt has strict rate limits for certificate requests. If you encounter rate limit errors in the logs, you may need to wait a few hours before trying again.");t(o,p)},$$slots:{default:!0}})},$$slots:{default:!0}});var mt=e(vt);I(mt,{children:(a,$)=>{r();var o=Vr(),n=e(d(o));V(n,{href:"https://doc.traefik.io/traefik/https/acme/#providers",children:(p,u)=>{r();var P=s("Traefik's DNS providers documentation");t(p,P)},$$slots:{default:!0}}),r(),t(a,o)},$$slots:{default:!0}}),At(X),t(ht,X)},$$slots:{default:!0}}))}export{po as component};
