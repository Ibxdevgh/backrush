import{t as $,b as l,a}from"../chunks/Cw4I5osi.js";import"../chunks/BzVk5r6l.js";import{c as ve,s as t,f as m,n as o,r as $e}from"../chunks/NgVQVlRK.js";import{n as me}from"../chunks/B4IyMRKX.js";import{H as P}from"../chunks/CXsRaEhZ.js";import"../chunks/hMT8fFzP.js";import{I as w}from"../chunks/BypEz2Fd.js";import"../chunks/NwRJ91PD.js";/* empty css                */import{A}from"../chunks/CP6rnx7i.js";import"../chunks/BZUG4Puk.js";/* empty css                */import"../chunks/D9bBQFLV.js";import{C as h}from"../chunks/DXp9_3zM.js";import{F as le}from"../chunks/OFUKRh55.js";import{L as T,I as g}from"../chunks/BhmTgGWB.js";import{P as v}from"../chunks/D8YsId2T.js";import{S as y}from"../chunks/yHjwcyUH.js";import{L as b}from"../chunks/yh4_9ChP.js";import"../chunks/POtwinrL.js";import"../chunks/CbbZjpT6.js";/* empty css                */import{A as _e}from"../chunks/CqOphJLh.js";const he={layout:"article",title:"Production",description:"Optimize self-hosted Backrush for production environments. Learn how to fine-tune performance, security, and scalability for your production deployments."};var fe=$("Backrush does not generate a unique encryption key during a default setup. This key encrypts your files and sensitive data like webhook passwords or API keys to keep them secure. To take advantage of this feature, you must generate a unique key and set it as the value of the <!> environment variable.",1),ge=$("You <!> set <!> immediately after installation of a production Backrush instance. Changing the <!> variable will cause the loss of existing passwords, OAuth secrets, and API keys.",1),Pe=$("You should always prefer <!> over HTTP in production environments. This keeps your APIs secure and prevents any redirects from interfering with your requests. You can force the use of HTTPS with the <!> environment variable.",1),ye=$("Whitelist a group of developers by IP using the <!> environment variable.",1),be=$("Whitelist a group of developers by email using the <!> environment variable.",1),ke=$("Only the root user can signup. All other developers must be added through invitations. This is configured using the <!> environment variable.",1),we=$("<!><!><!>",1),Ae=$("If you decide to set up a load balancer to scale a container, make sure <!> communication are routed through the load balancer and not directly to the replicated containers. You can configure communicating between Backrush containers using Docker environment variables.",1),Te=$("If you disabled rate limits during development, make sure you re-enable them when moving to production environments. Rate limiting can be enabled by setting the <!> environment variable to <!>.",1),xe=$("Rate limits are an important mechanism to protect your app. Without rate limits, malicious actors can spam your APIs to perform <!> or brute-force user passwords.",1),Se=$("You can <!> and credentials to any 3rd party provider you like that supports SMTP integration using our Docker environment variables. Most SMTP providers offer a decent free tier to get started with.",1),Ie=$("Create a script to back up <!> and <!>, which holds secrets and server configuration information.",1),Ee=$("<!><!><!>",1),Oe=$("Do not back up any stateful container using a docker volume backup, such as databases or Redis containers. This can result in corruption and <!>.",1),Le=$("By default, your Backrush installation comes with error reporting turned off. You can <!> to get access to more verbose error logs and stack traces.",1),Ce=$("In production, it is highly recommended to turn error reporting off. To do so, make sure the Backrush container environment variable <!> is set to <!> and not <!>.",1),Ye=$("To monitor errors in production, configure the <!> environment variable with your provider&#39;s DSN. The supported DSN formats are:",1),Ne=$("Sentry: <!>",1),Re=$("LogOwl: <!>",1),De=$("Raygun: <!>",1),He=$("AppSignal: <!>",1),Me=$("<!><!><!><!>",1),We=$("After editing your <!> or <!> files, you will need to recreate your Backrush stack by running the following compose command in your terminal.",1),Be=$("<!><!><!><!>",1),Ke=$("<article><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!></article>");function vt(de){_e(de,me(he,{children:(ue,Ge)=>{var k=Ke(),x=ve(k);v(x,{children:(r,i)=>{o();var e=l("Backrush's default setup is designed to help you start building with Backrush quickly. To succeed with Backrush in a production environment, you should follow a few basic concepts and best practices. This document assumes you have some basic understanding of Docker and Docker Compose command-line tools.");a(r,e)},$$slots:{default:!0}});var S=t(x);P(S,{id:"encryption",level:1,children:(r,i)=>{o();var e=l("Encryption");a(r,e)},$$slots:{default:!0}});var I=t(S);v(I,{children:(r,i)=>{o();var e=fe(),n=t(m(e));h(n,{content:"_APP_OPENSSL_KEY_V1"}),o(),a(r,e)},$$slots:{default:!0}});var E=t(I);v(E,{children:(r,i)=>{o();var e=ge(),n=t(m(e));y(n,{marker:"**",children:(u,p)=>{o();var c=l("must");a(u,c)},$$slots:{default:!0}});var s=t(n,2);h(s,{content:"_APP_OPENSSL_KEY_V1"});var _=t(s,2);h(_,{content:"_APP_OPENSSL_KEY_V1"}),o(),a(r,e)},$$slots:{default:!0}});var O=t(E);v(O,{children:(r,i)=>{o();var e=l("Make sure to keep this key in a safe place and never make it publicly accessible.");a(r,e)},$$slots:{default:!0}});var L=t(O);w(L,{title:"Best practice",children:(r,i)=>{v(r,{children:(e,n)=>{o();var s=Pe(),_=t(m(s));y(_,{marker:"**",children:(p,c)=>{o();var d=l("HTTPS");a(p,d)},$$slots:{default:!0}});var u=t(_,2);b(u,{href:"/docs/advanced/self-hosting/environment-variables",children:(p,c)=>{o();var d=l("_APP_OPTIONS_FORCE_HTTPS");a(p,d)},$$slots:{default:!0}}),o(),a(e,s)},$$slots:{default:!0}})}});var C=t(L);P(C,{id:"console-access",level:1,children:(r,i)=>{o();var e=l("Console access");a(r,e)},$$slots:{default:!0}});var Y=t(C);v(Y,{children:(r,i)=>{o();var e=l("Backrush provides three different methods to limit access to your Backrush Console.");a(r,e)},$$slots:{default:!0}});var N=t(Y);T(N,{ordered:!0,marker:".",children:(r,i)=>{var e=we(),n=m(e);g(n,{children:(u,p)=>{o();var c=ye(),d=t(m(c));h(d,{content:"_APP_CONSOLE_WHITELIST_IPS"}),o(),a(u,c)},$$slots:{default:!0}});var s=t(n);g(s,{children:(u,p)=>{o();var c=be(),d=t(m(c));h(d,{content:"_APP_CONSOLE_WHITELIST_EMAILS"}),o(),a(u,c)},$$slots:{default:!0}});var _=t(s);g(_,{children:(u,p)=>{o();var c=ke(),d=t(m(c));h(d,{content:"_APP_CONSOLE_WHITELIST_ROOT"}),o(),a(u,c)},$$slots:{default:!0}}),a(r,e)},$$slots:{default:!0}});var R=t(N);v(R,{children:(r,i)=>{o();var e=l("By default, only the first user can sign up on the Backrush instance's dashboard. All other users must be added to the dashboard through invitation.");a(r,e)},$$slots:{default:!0}});var D=t(R);A(D,{href:"/docs/advanced/self-hosting/environment-variables",children:(r,i)=>{v(r,{children:(e,n)=>{o();var s=l("Learn more about environment variables");a(e,s)},$$slots:{default:!0}})},$$slots:{default:!0}});var H=t(D);P(H,{id:"scaling",level:1,children:(r,i)=>{o();var e=l("Scaling");a(r,e)},$$slots:{default:!0}});var M=t(H);v(M,{children:(r,i)=>{o();var e=l("Backrush is built with scalability in mind. Backrush can scale both horizontally and vertically.");a(r,e)},$$slots:{default:!0}});var W=t(M);v(W,{children:(r,i)=>{o();var e=l("Each Backrush instance is composed of many containers, each with its unique job. Backrush's functions and worker containers are stateless. To scale them, all you need is to replicate them and set up a load balancer to distribute their load.");a(r,e)},$$slots:{default:!0}});var B=t(W);v(B,{children:(r,i)=>{o();var e=Ae(),n=t(m(e));y(n,{marker:"**",children:(s,_)=>{o();var u=l("all");a(s,u)},$$slots:{default:!0}}),o(),a(r,e)},$$slots:{default:!0}});var K=t(B);v(K,{children:(r,i)=>{o();var e=l("Two Backrush containers are stateful. The MariaDB and Redis containers are used for storing data, cache and pub/sub messaging, and usage stats, respectively. To scale these containers, set up a standard cluster (same as you would with any other app using these technologies) according to your needs and performance.");a(r,e)},$$slots:{default:!0}});var G=t(K);P(G,{id:"rate-limits",level:1,children:(r,i)=>{o();var e=l("Rate limits");a(r,e)},$$slots:{default:!0}});var V=t(G);v(V,{children:(r,i)=>{o();var e=Te(),n=t(m(e));h(n,{content:"_APP_OPTIONS_ABUSE"});var s=t(n,2);h(s,{content:"enabled"}),o(),a(r,e)},$$slots:{default:!0}});var q=t(V);v(q,{children:(r,i)=>{o();var e=xe(),n=t(m(e));b(n,{href:"https://en.wikipedia.org/wiki/Denial-of-service_attack",children:(s,_)=>{o();var u=l("denial-of-service type attacks");a(s,u)},$$slots:{default:!0}}),o(),a(r,e)},$$slots:{default:!0}});var F=t(q);A(F,{href:"/docs/advanced/self-hosting/environment-variables",children:(r,i)=>{v(r,{children:(e,n)=>{o();var s=l("Learn more about environment variables");a(e,s)},$$slots:{default:!0}})},$$slots:{default:!0}});var z=t(F);P(z,{id:"emails",level:1,children:(r,i)=>{o();var e=l("Emails");a(r,e)},$$slots:{default:!0}});var U=t(z);v(U,{children:(r,i)=>{o();var e=l("Sending emails is hard. There are a lot of spam rules and configurations to master in order to set up a functional SMTP server. While it is okay to use a self-hosted SMTP server during development, you should use a third-party SMTP provider for production so your email doesn't get labeled as spam.");a(r,e)},$$slots:{default:!0}});var j=t(U);v(j,{children:(r,i)=>{o();var e=Se(),n=t(m(e));b(n,{href:"/docs/advanced/self-hosting/email",children:(s,_)=>{o();var u=l("change Backrush's SMTP settings");a(s,u)},$$slots:{default:!0}}),o(),a(r,e)},$$slots:{default:!0}});var J=t(j);P(J,{id:"backups",level:1,children:(r,i)=>{o();var e=l("Backups");a(r,e)},$$slots:{default:!0}});var Q=t(J);v(Q,{children:(r,i)=>{o();var e=l("Backups are highly recommended for any production environment. Currently, there is no built-in script we provide to do this automatically. You must do the following to back up your Backrush server data, stats, and files.");a(r,e)},$$slots:{default:!0}});var X=t(Q);T(X,{ordered:!0,marker:".",children:(r,i)=>{var e=Ee(),n=m(e);g(n,{children:(u,p)=>{o();var c=l("Create a script to back up and restore the databases holding your Backrush schemas. Note that trying to back up the database containers using a docker volume backup can result in a corrupted copy of your data. We recommend using the databases' built-in tools for this.");a(u,c)},$$slots:{default:!0}});var s=t(n);g(s,{children:(u,p)=>{o();var c=l("Create a script to back up Backrush storage volume. There are many online resources explaining different ways to backup a docker volume. When running on multiple servers, it is very recommended to use an attachable storage point. Some cloud providers offer integrated backups to such attachable mount like GCP, AWS, DigitalOcean, and the list continues.");a(u,c)},$$slots:{default:!0}});var _=t(s);g(_,{children:(u,p)=>{o();var c=Ie(),d=t(m(c));h(d,{content:".env"});var f=t(d,2);h(f,{content:"docker-compose.yml"}),o(),a(u,c)},$$slots:{default:!0}}),a(r,e)},$$slots:{default:!0}});var Z=t(X);w(Z,{title:"Docker volume backups",children:(r,i)=>{v(r,{children:(e,n)=>{o();var s=Oe(),_=t(m(s));y(_,{marker:"**",children:(u,p)=>{o();var c=l("permanent data loss");a(u,c)},$$slots:{default:!0}}),o(),a(e,s)},$$slots:{default:!0}})}});var ee=t(Z);P(ee,{id:"errors",level:1,children:(r,i)=>{o();var e=l("Errors");a(r,e)},$$slots:{default:!0}});var te=t(ee);v(te,{children:(r,i)=>{o();var e=Le(),n=t(m(e));b(n,{href:"/docs/advanced/self-hosting/debug#development-mode",children:(s,_)=>{o();var u=l("enable dev mode");a(s,u)},$$slots:{default:!0}}),o(),a(r,e)},$$slots:{default:!0}});var re=t(te);v(re,{children:(r,i)=>{o();var e=Ce(),n=t(m(e));h(n,{content:"_APP_ENV"});var s=t(n,2);h(s,{content:"production"});var _=t(s,2);h(_,{content:"development"}),o(),a(r,e)},$$slots:{default:!0}});var oe=t(re);v(oe,{children:(r,i)=>{o();var e=Ye(),n=t(m(e));h(n,{content:"_APP_LOGGING_CONFIG"}),o(),a(r,e)},$$slots:{default:!0}});var ae=t(oe);T(ae,{ordered:!1,marker:"-",children:(r,i)=>{var e=Me(),n=m(e);g(n,{children:(p,c)=>{o();var d=Ne(),f=t(m(d));h(f,{content:"sentry://PUBLIC_KEY@HOST:PORT/PROJECT_ID"}),a(p,d)},$$slots:{default:!0}});var s=t(n);g(s,{children:(p,c)=>{o();var d=Re(),f=t(m(d));h(f,{content:"logowl://SERVICE_TICKET@SERVICE_HOST/"}),a(p,d)},$$slots:{default:!0}});var _=t(s);g(_,{children:(p,c)=>{o();var d=De(),f=t(m(d));h(f,{content:"raygun://RAYGUN_API_KEY/"}),a(p,d)},$$slots:{default:!0}});var u=t(_);g(u,{children:(p,c)=>{o();var d=He(),f=t(m(d));h(f,{content:"appsignal://API_KEY/"}),a(p,d)},$$slots:{default:!0}}),a(r,e)},$$slots:{default:!0}});var se=t(ae);A(se,{href:"/docs/advanced/self-hosting/environment-variables",children:(r,i)=>{v(r,{children:(e,n)=>{o();var s=l("Learn more about environment variables");a(e,s)},$$slots:{default:!0}})},$$slots:{default:!0}});var ne=t(se);P(ne,{id:"security",level:1,children:(r,i)=>{o();var e=l("Security");a(r,e)},$$slots:{default:!0}});var ie=t(ne);v(ie,{children:(r,i)=>{o();var e=l("In addition to the security practices mentioned, it is highly recommended to do regular audits to identify and fix potential security vulnerabilities and performance issues. You can use third-party tools and services that specialize in these areas. These tools can automatically check for vulnerabilities and even offer real-time monitoring.");a(r,e)},$$slots:{default:!0}});var ce=t(ie);w(ce,{title:"Applying changes",children:(r,i)=>{var e=Be(),n=m(e);v(n,{children:(p,c)=>{o();var d=We(),f=t(m(d));h(f,{content:"docker-compose.yml"});var pe=t(f,2);h(pe,{content:".env"}),o(),a(p,d)},$$slots:{default:!0}});var s=t(n);le(s,{content:`docker compose up -d
`,language:"sh",process:!0,children:(p,c)=>{o();var d=l("docker compose up -d");a(p,d)},$$slots:{default:!0}});var _=t(s);v(_,{children:(p,c)=>{o();var d=l("You can verify if the changes have been successfully applied by running this command:");a(p,d)},$$slots:{default:!0}});var u=t(_);le(u,{content:`docker compose exec appwrite vars
`,language:"sh",process:!0,children:(p,c)=>{o();var d=l("docker compose exec appwrite vars");a(p,d)},$$slots:{default:!0}}),a(r,e)}}),$e(k),a(ue,k)},$$slots:{default:!0}}))}export{vt as component};
