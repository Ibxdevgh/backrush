import{t as l,b as s,a as r}from"../chunks/Cw4I5osi.js";import"../chunks/BzVk5r6l.js";import{c as Et,s as e,f as d,n as o,r as St}from"../chunks/NgVQVlRK.js";import{n as Nt}from"../chunks/B4IyMRKX.js";import{H}from"../chunks/CXsRaEhZ.js";import"../chunks/hMT8fFzP.js";import{I as xt}from"../chunks/BypEz2Fd.js";import"../chunks/NwRJ91PD.js";/* empty css                */import"../chunks/BZUG4Puk.js";/* empty css                */import"../chunks/D9bBQFLV.js";import{B as yt}from"../chunks/BlhJVlLQ.js";import{C as v}from"../chunks/DXp9_3zM.js";import{F as L}from"../chunks/OFUKRh55.js";import{L as j,I as V}from"../chunks/BhmTgGWB.js";import{P as x}from"../chunks/D8YsId2T.js";import{S as O}from"../chunks/yHjwcyUH.js";import{L as K}from"../chunks/yh4_9ChP.js";import{T as Z}from"../chunks/D8BqvLkQ.js";import{T as z,a as k,b as q,c as J,d as b}from"../chunks/BpU_IltG.js";import{A as Dt}from"../chunks/CqOphJLh.js";const Ot={layout:"article",title:"Sites",description:"Harness the full power of self-hosted sites with Backrush. Explore site deployment, management, and integration in your self-hosted environment."};var Gt=l("Backrush supports automatic deployments through Git integration. In order for Backrush to access your repos, you must <!> to enable this integration. The GitHub app requires the following configurations.",1),Ht=l("For automatic Git deployment to work, Backrush needs to receive communication from GitHub, this means your Backrush project must be accessible on the internet. If you&#39;re running on <!>, you need to run a proxy like <!>.",1),Rt=l("The GitHub App name will be displayed when connecting Backrush to GitHub. In addition, this name will be transformed to a slug (&quot;My GitHub App&quot; will become &quot;my-github-app&quot;) and appear in the URL when accessing your app in GitHub. This slug should be set as the <!> environment variable in Backrush.",1),Ct=l("GitHub will use <!> to redirect users back to Backrush. Set these callback URLs under <!> in the same order as listed below.",1),Mt=l("<!><!>",1),Ut=l("<!><!>",1),Lt=l("Also, check the <!> box.",1),Bt=l("Check the <!> box under the <!> section.",1),Vt=l("GitHub will notify Backrush about events like new commits using webhooks. Under <!>, you need to check the <!> checkbox. You also need to set the <!> as <!>.",1),Yt=l("If you&#39;re running Backrush on <!>, GitHub can&#39;t send requests to Backrush through webhooks and automatic deployments won&#39;t work. You&#39;ll need to host Backrush on a server or use a proxy like <!> to make Backrush accessible to GitHub.",1),Kt=l("Configure these permissions under the <!> dropdown.",1),qt=l("<!><!>",1),Ft=l("<!><!>",1),Wt=l("<!><!>",1),jt=l("<!><!>",1),Qt=l("<!><!>",1),Zt=l("<!><!>",1),zt=l("<!><!>",1),Jt=l("<!><!>",1),Xt=l("<!><!>",1),er=l("<!><!><!><!><!><!><!><!>",1),tr=l("<!><!>",1),rr=l("Configure these permissions under the <!> dropdown.",1),or=l("<!><!>",1),ar=l("<!><!>",1),sr=l("<!><!>",1),nr=l("Select these under the <!> dropdown.",1),lr=l("<!><!>",1),ir=l("<!><!>",1),dr=l("Check the <!> box under <!> section. This is important to allow you to install the GitHub app on multiple Backrush projects.",1),$r=l("<!><!>",1),ur=l("Your main Backrush domain used to access the Backrush Console. When setting a public suffix domain, Backrush will attempt to issue a valid SSL certificate automatically. When used with a dev domain, Backrush will assign a self-signed SSL certificate. If you&#39;re using a proxy for <!>, such as <!>, this will be the domain of your localhost proxy.",1),_r=l("<!><!>",1),cr=l("A hostname to serve as a CNAME target for your Backrush custom domains. You can use the same value as used for the Backrush <!> variable. If you&#39;re using a proxy for <!>, such as <!>, this will be the domain of your localhost proxy, such as <!>.",1),pr=l("<!><!>",1),vr=l("This will be used for system generated <!>. When a function domain is generated, it will be <!>. If <!> is set to <!> for example, the generated domain for functions will be something like <!>. You can use the same value as used for the Backrush <!> variable.",1),fr=l("<!><!>",1),hr=l("This will be used for system generated <!>. When a site domain is generated, it will be <!>. If <!> is set to <!> for example, the generated domain for sites will be something like <!>. You can use the same value as used for the Backrush <!> variable.",1),mr=l("<!><!>",1),Pr=l("<!><!>",1),gr=l("RSA private key from GitHub wrapped with double quotes and newlines replaced with <!>. You can generate private keys from GitHub application settings.",1),Ar=l("<!><!>",1),br=l("<!><!>",1),xr=l("<!><!>",1),yr=l("<!><!>",1),wr=l("<!><!>",1),Ir=l("<!><!><!><!><!><!><!><!><!><!>",1),Tr=l("<!><!>",1),kr=l("There are additional steps if you&#39;re updating permissions in existing GitHub apps. Every time you update your GitHub app&#39;s permissions, GitHub will prompt you to review the changes. You will receive an email and you&#39;ll find a prompt under <!> &gt; <!> &gt; <!> &gt; <!> &gt; find your GitHub app &gt; <!>. You need to accept the new permissions so they&#39;re applied to your app.",1),Er=l("Not all site runtimes are enabled by default. Enable the runtimes that you need and disable unused runtimes to save disk space on your server. To enable a runtime, add it to the <!> environment variable as a comma-separated list.",1),Sr=l("You can also configure the maximum timeout that can be set on individual Backrush Sites. The maximum configurable timeout can be increased by changing the <!> environment variable. This environment variable changes the configurable maximum but does not alter existing configurations of individual sites.",1),Nr=l("After editing your <!> or <!> files, you will need to recreate your Backrush stack by running the following compose command in your terminal.",1),Dr=l("<!><!><!><!>",1),Or=l("An apex domain, also known as a root domain, is the highest level of a domain name without any subdomains. For example, <!> is an apex domain, while <!> is a subdomain of the apex domain.",1),Gr=l("To add an apex domain, you must first configure either one of the following environment variables in your <!> file:",1),Hr=l("<!>: Set this to the IPv4 address of your server.",1),Rr=l("<!>: Set this to the IPv6 address of your server.",1),Cr=l("<!><!>",1),Mr=l("Head to the <!> tab of your site, and add your apex domain (e.g., <!>) as a new domain pointed to the active deployment.",1),Ur=l("Note: Make sure to remove any pre-existing <!> and <!> records in the DNS settings of your domain, as these can conflict with your current configuration.",1),Lr=l("Before setting up SSL certificates, ensure you have configured your DNS settings properly. You&#39;ll need to create a CNAME, A, or AAAA record that points your wildcard domain (e.g. <!>) to your Backrush domain.",1),Br=l("Backrush does not handle certificates for sites domains (e.g. <!>) out of the box, since they require wildcard certificates. There are two ways to handle certificate generation.",1),Vr=l("For automated certificate generation, Backrush uses Traefik&#39;s DNS Challenge feature. This is required for wildcard certificates (like <!>) because Let&#39;s Encrypt uses the DNS-01 challenge to validate wildcard domain ownership.",1),Yr=l("To configure Traefik for automated certificate generation with DigitalOcean, you need to modify your <!>:",1),Kr=l("Add the following under the <!> service&#39;s <!> section.",1),qr=l("Add environment variables under the <!> service.",1),Fr=l("Add the following <!> under the <!> service.",1),Wr=l("Ensure these environment variables are properly configured in your <!> file before proceeding:",1),jr=l("<!> must be set to a valid email for Let&#39;s Encrypt notifications",1),Qr=l("<!> must be correctly set to your site domain (e.g., <!>)",1),Zr=l("<!> must be set to a valid DigitalOcean API token (generate this in the DigitalOcean Console)",1),zr=l("<!><!><!>",1),Jr=l("<!><!>",1),Xr=l("<!><!>",1),eo=l("A common issue is DNS propagation delays. If the logs show DNS verification failures, you can configure longer timeouts in your <!> under the <!> service.",1),to=l("For other DNS providers, refer to <!>.",1),ro=l("<article><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!></article>");function To(wt){Dt(wt,Nt(Ot,{children:(It,oo)=>{var X=ro(),te=Et(X);H(te,{id:"git",level:1,children:(a,i)=>{o();var t=s("Configure GitHub app");r(a,t)},$$slots:{default:!0}});var re=e(te);x(re,{children:(a,i)=>{o();var t=Gt(),n=e(d(t));K(n,{href:"https://docs.github.com/en/apps/creating-github-apps/about-creating-github-apps/about-creating-github-apps",children:(c,$)=>{o();var h=s("create a GitHub app");r(c,h)},$$slots:{default:!0}}),o(),r(a,t)},$$slots:{default:!0}});var oe=e(re);x(oe,{children:(a,i)=>{o();var t=Ht(),n=e(d(t));v(n,{content:"localhost"});var c=e(n,2);K(c,{href:"https://ngrok.com/",children:($,h)=>{o();var _=s("ngrok");r($,_)},$$slots:{default:!0}}),o(),r(a,t)},$$slots:{default:!0}});var ae=e(oe);H(ae,{id:"github-app-name",level:2,children:(a,i)=>{o();var t=s("GitHub App name");r(a,t)},$$slots:{default:!0}});var se=e(ae);x(se,{children:(a,i)=>{o();var t=Rt(),n=e(d(t));v(n,{content:"_APP_VCS_GITHUB_APP_NAME"}),o(),r(a,t)},$$slots:{default:!0}});var ne=e(se);H(ne,{id:"github-homepage-url",level:2,children:(a,i)=>{o();var t=s("Homepage URL");r(a,t)},$$slots:{default:!0}});var le=e(ne);x(le,{children:(a,i)=>{o();var t=s("The homepage URL will appear when looking at the public page of your app. It can be any URL you'd like.");r(a,t)},$$slots:{default:!0}});var ie=e(le);H(ie,{id:"callback",level:2,children:(a,i)=>{o();var t=s("Callback URL");r(a,t)},$$slots:{default:!0}});var de=e(ie);x(de,{children:(a,i)=>{o();var t=Ct(),n=e(d(t));O(n,{marker:"**",children:($,h)=>{o();var _=s("callback URLs");r($,_)},$$slots:{default:!0}});var c=e(n,2);O(c,{marker:"**",children:($,h)=>{o();var _=s("Identifying and authorizing users");r($,_)},$$slots:{default:!0}}),o(),r(a,t)},$$slots:{default:!0}});var $e=e(de);Z($e,{children:(a,i)=>{var t=Ut(),n=d(t);z(n,{children:($,h)=>{k($,{children:(_,A)=>{q(_,{children:(m,g)=>{o();var E=s("URLs");r(m,E)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}});var c=e(n);J(c,{children:($,h)=>{var _=Mt(),A=d(_);k(A,{children:(g,E)=>{b(g,{children:(w,D)=>{v(w,{content:"https://<HOSTNAME_OR_IP>/v1/vcs/github/callback"})},$$slots:{default:!0}})},$$slots:{default:!0}});var m=e(A);k(m,{children:(g,E)=>{b(g,{children:(w,D)=>{v(w,{content:"https://<HOSTNAME_OR_IP>/v1/account/sessions/oauth2/callback/github/console"})},$$slots:{default:!0}})},$$slots:{default:!0}}),r($,_)},$$slots:{default:!0}}),r(a,t)},$$slots:{default:!0}});var ue=e($e);x(ue,{children:(a,i)=>{o();var t=Lt(),n=e(d(t));O(n,{marker:"**",children:(c,$)=>{o();var h=s("Request user authentication (OAuth) during installation");r(c,h)},$$slots:{default:!0}}),o(),r(a,t)},$$slots:{default:!0}});var _e=e(ue);H(_e,{id:"post-install",level:2,children:(a,i)=>{o();var t=s("Post installation");r(a,t)},$$slots:{default:!0}});var ce=e(_e);x(ce,{children:(a,i)=>{o();var t=Bt(),n=e(d(t));O(n,{marker:"**",children:($,h)=>{o();var _=s("Redirect on update");r($,_)},$$slots:{default:!0}});var c=e(n,2);O(c,{marker:"**",children:($,h)=>{o();var _=s("Post installation");r($,_)},$$slots:{default:!0}}),o(),r(a,t)},$$slots:{default:!0}});var pe=e(ce);H(pe,{id:"github-webhooks",level:2,children:(a,i)=>{o();var t=s("Webhook");r(a,t)},$$slots:{default:!0}});var ve=e(pe);x(ve,{children:(a,i)=>{o();var t=Vt(),n=e(d(t));O(n,{marker:"**",children:(_,A)=>{o();var m=s("Webhook");r(_,m)},$$slots:{default:!0}});var c=e(n,2);O(c,{marker:"**",children:(_,A)=>{o();var m=s("Active");r(_,m)},$$slots:{default:!0}});var $=e(c,2);O($,{marker:"**",children:(_,A)=>{o();var m=s("Webhook URL");r(_,m)},$$slots:{default:!0}});var h=e($,2);v(h,{content:"https://<HOSTNAME_OR_IP>/v1/vcs/github/events"}),o(),r(a,t)},$$slots:{default:!0}});var fe=e(ve);x(fe,{children:(a,i)=>{o();var t=Yt(),n=e(d(t));v(n,{content:"localhost"});var c=e(n,2);K(c,{href:"https://ngrok.com/",children:($,h)=>{o();var _=s("ngrok");r($,_)},$$slots:{default:!0}}),o(),r(a,t)},$$slots:{default:!0}});var he=e(fe);H(he,{id:"repository-permission",level:2,children:(a,i)=>{o();var t=s("Repository permissions");r(a,t)},$$slots:{default:!0}});var me=e(he);x(me,{children:(a,i)=>{o();var t=Kt(),n=e(d(t));O(n,{marker:"**",children:(c,$)=>{o();var h=s("Repository permission");r(c,h)},$$slots:{default:!0}}),o(),r(a,t)},$$slots:{default:!0}});var Pe=e(me);Z(Pe,{children:(a,i)=>{var t=tr(),n=d(t);z(n,{children:($,h)=>{k($,{children:(_,A)=>{var m=qt(),g=d(m);q(g,{children:(w,D)=>{o();var T=s("Permission");r(w,T)},$$slots:{default:!0}});var E=e(g);q(E,{children:(w,D)=>{o();var T=s("Access");r(w,T)},$$slots:{default:!0}}),r(_,m)},$$slots:{default:!0}})},$$slots:{default:!0}});var c=e(n);J(c,{children:($,h)=>{var _=er(),A=d(_);k(A,{children:(S,M)=>{var f=Ft(),y=d(f);b(y,{children:(p,I)=>{o();var u=s("Administration");r(p,u)},$$slots:{default:!0}});var P=e(y);b(P,{children:(p,I)=>{o();var u=s("Read and write");r(p,u)},$$slots:{default:!0}}),r(S,f)},$$slots:{default:!0}});var m=e(A);k(m,{children:(S,M)=>{var f=Wt(),y=d(f);b(y,{children:(p,I)=>{o();var u=s("Checks");r(p,u)},$$slots:{default:!0}});var P=e(y);b(P,{children:(p,I)=>{o();var u=s("Read and write");r(p,u)},$$slots:{default:!0}}),r(S,f)},$$slots:{default:!0}});var g=e(m);k(g,{children:(S,M)=>{var f=jt(),y=d(f);b(y,{children:(p,I)=>{o();var u=s("Commit Statuses");r(p,u)},$$slots:{default:!0}});var P=e(y);b(P,{children:(p,I)=>{o();var u=s("Read and write");r(p,u)},$$slots:{default:!0}}),r(S,f)},$$slots:{default:!0}});var E=e(g);k(E,{children:(S,M)=>{var f=Qt(),y=d(f);b(y,{children:(p,I)=>{o();var u=s("Contents");r(p,u)},$$slots:{default:!0}});var P=e(y);b(P,{children:(p,I)=>{o();var u=s("Read and write");r(p,u)},$$slots:{default:!0}}),r(S,f)},$$slots:{default:!0}});var w=e(E);k(w,{children:(S,M)=>{var f=Zt(),y=d(f);b(y,{children:(p,I)=>{o();var u=s("Issues");r(p,u)},$$slots:{default:!0}});var P=e(y);b(P,{children:(p,I)=>{o();var u=s("Read and write");r(p,u)},$$slots:{default:!0}}),r(S,f)},$$slots:{default:!0}});var D=e(w);k(D,{children:(S,M)=>{var f=zt(),y=d(f);b(y,{children:(p,I)=>{o();var u=s("Metadata");r(p,u)},$$slots:{default:!0}});var P=e(y);b(P,{children:(p,I)=>{o();var u=s("Read-only");r(p,u)},$$slots:{default:!0}}),r(S,f)},$$slots:{default:!0}});var T=e(D);k(T,{children:(S,M)=>{var f=Jt(),y=d(f);b(y,{children:(p,I)=>{o();var u=s("Pull requests");r(p,u)},$$slots:{default:!0}});var P=e(y);b(P,{children:(p,I)=>{o();var u=s("Read and write");r(p,u)},$$slots:{default:!0}}),r(S,f)},$$slots:{default:!0}});var W=e(T);k(W,{children:(S,M)=>{var f=Xt(),y=d(f);b(y,{children:(p,I)=>{o();var u=s("Webhooks");r(p,u)},$$slots:{default:!0}});var P=e(y);b(P,{children:(p,I)=>{o();var u=s("Read and write");r(p,u)},$$slots:{default:!0}}),r(S,f)},$$slots:{default:!0}}),r($,_)},$$slots:{default:!0}}),r(a,t)},$$slots:{default:!0}});var ge=e(Pe);H(ge,{id:"account-permission",level:2,children:(a,i)=>{o();var t=s("Account permissions");r(a,t)},$$slots:{default:!0}});var Ae=e(ge);x(Ae,{children:(a,i)=>{o();var t=rr(),n=e(d(t));O(n,{marker:"**",children:(c,$)=>{o();var h=s("Account Permission");r(c,h)},$$slots:{default:!0}}),o(),r(a,t)},$$slots:{default:!0}});var be=e(Ae);Z(be,{children:(a,i)=>{var t=sr(),n=d(t);z(n,{children:($,h)=>{k($,{children:(_,A)=>{var m=or(),g=d(m);q(g,{children:(w,D)=>{o();var T=s("Permission");r(w,T)},$$slots:{default:!0}});var E=e(g);q(E,{children:(w,D)=>{o();var T=s("Access");r(w,T)},$$slots:{default:!0}}),r(_,m)},$$slots:{default:!0}})},$$slots:{default:!0}});var c=e(n);J(c,{children:($,h)=>{k($,{children:(_,A)=>{var m=ar(),g=d(m);b(g,{children:(w,D)=>{o();var T=s("Email address");r(w,T)},$$slots:{default:!0}});var E=e(g);b(E,{children:(w,D)=>{o();var T=s("Read-only");r(w,T)},$$slots:{default:!0}}),r(_,m)},$$slots:{default:!0}})},$$slots:{default:!0}}),r(a,t)},$$slots:{default:!0}});var xe=e(be);H(xe,{id:"subscribe-events",level:2,children:(a,i)=>{o();var t=s("Subscribe to events");r(a,t)},$$slots:{default:!0}});var ye=e(xe);x(ye,{children:(a,i)=>{o();var t=nr(),n=e(d(t));O(n,{marker:"**",children:(c,$)=>{o();var h=s("Subscribe to events");r(c,h)},$$slots:{default:!0}}),o(),r(a,t)},$$slots:{default:!0}});var we=e(ye);Z(we,{children:(a,i)=>{var t=ir(),n=d(t);z(n,{children:($,h)=>{k($,{children:(_,A)=>{q(_,{children:(m,g)=>{o();var E=s("Events");r(m,E)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}});var c=e(n);J(c,{children:($,h)=>{var _=lr(),A=d(_);k(A,{children:(g,E)=>{b(g,{children:(w,D)=>{o();var T=s("Pull request");r(w,T)},$$slots:{default:!0}})},$$slots:{default:!0}});var m=e(A);k(m,{children:(g,E)=>{b(g,{children:(w,D)=>{o();var T=s("Push");r(w,T)},$$slots:{default:!0}})},$$slots:{default:!0}}),r($,_)},$$slots:{default:!0}}),r(a,t)},$$slots:{default:!0}});var Ie=e(we);H(Ie,{id:"github-where-installed",level:2,children:(a,i)=>{o();var t=s("Where can this GitHub App be installed?");r(a,t)},$$slots:{default:!0}});var Te=e(Ie);x(Te,{children:(a,i)=>{o();var t=dr(),n=e(d(t));O(n,{marker:"**",children:($,h)=>{o();var _=s("Any account");r($,_)},$$slots:{default:!0}});var c=e(n,2);O(c,{marker:"**",children:($,h)=>{o();var _=s("Where can this GitHub App be installed?");r($,_)},$$slots:{default:!0}}),o(),r(a,t)},$$slots:{default:!0}});var ke=e(Te);H(ke,{id:"github-variables",level:2,children:(a,i)=>{o();var t=s("Environment variables");r(a,t)},$$slots:{default:!0}});var Ee=e(ke);x(Ee,{children:(a,i)=>{o();var t=s("After creating your app, you'll have to configure the following environment variables.");r(a,t)},$$slots:{default:!0}});var Se=e(Ee);Z(Se,{children:(a,i)=>{var t=Tr(),n=d(t);z(n,{children:($,h)=>{k($,{children:(_,A)=>{var m=$r(),g=d(m);q(g,{children:(w,D)=>{o();var T=s("Variable");r(w,T)},$$slots:{default:!0}});var E=e(g);q(E,{children:(w,D)=>{o();var T=s("Description");r(w,T)},$$slots:{default:!0}}),r(_,m)},$$slots:{default:!0}})},$$slots:{default:!0}});var c=e(n);J(c,{children:($,h)=>{var _=Ir(),A=d(_);k(A,{children:(f,y)=>{var P=_r(),p=d(P);b(p,{children:(u,G)=>{v(u,{content:"_APP_DOMAIN"})},$$slots:{default:!0}});var I=e(p);b(I,{children:(u,G)=>{o();var N=ur(),R=e(d(N));O(R,{marker:"**",children:(U,Y)=>{o();var C=s("localhost development");r(U,C)},$$slots:{default:!0}});var B=e(R,2);K(B,{href:"https://ngrok.com/",children:(U,Y)=>{o();var C=s("ngrok");r(U,C)},$$slots:{default:!0}}),o(),r(u,N)},$$slots:{default:!0}}),r(f,P)},$$slots:{default:!0}});var m=e(A);k(m,{children:(f,y)=>{var P=pr(),p=d(P);b(p,{children:(u,G)=>{v(u,{content:"_APP_DOMAIN_TARGET"})},$$slots:{default:!0}});var I=e(p);b(I,{children:(u,G)=>{o();var N=cr(),R=e(d(N));v(R,{content:"_APP_DOMAIN"});var B=e(R,2);O(B,{marker:"**",children:(C,Q)=>{o();var F=s("localhost development");r(C,F)},$$slots:{default:!0}});var U=e(B,2);K(U,{href:"https://ngrok.com/",children:(C,Q)=>{o();var F=s("ngrok");r(C,F)},$$slots:{default:!0}});var Y=e(U,2);v(Y,{content:"dd65-2405-201-4013-d8d7-b4c5-fb73-39f9-285c.ngrok.io"}),o(),r(u,N)},$$slots:{default:!0}}),r(f,P)},$$slots:{default:!0}});var g=e(m);k(g,{children:(f,y)=>{var P=fr(),p=d(P);b(p,{children:(u,G)=>{v(u,{content:"_APP_DOMAIN_FUNCTIONS"})},$$slots:{default:!0}});var I=e(p);b(I,{children:(u,G)=>{o();var N=vr(),R=e(d(N));K(R,{href:"/docs/products/functions/domains",children:(F,kt)=>{o();var ee=s("Function Domains");r(F,ee)},$$slots:{default:!0}});var B=e(R,2);v(B,{content:"[UNIQUE_ID].[_APP_DOMAIN_FUNCTIONS]"});var U=e(B,2);v(U,{content:"_APP_DOMAIN_FUNCTIONS"});var Y=e(U,2);v(Y,{content:"example.com"});var C=e(Y,2);v(C,{content:"64d4d22db370ae41a32e.example.com"});var Q=e(C,2);v(Q,{content:"_APP_DOMAIN"}),o(),r(u,N)},$$slots:{default:!0}}),r(f,P)},$$slots:{default:!0}});var E=e(g);k(E,{children:(f,y)=>{var P=mr(),p=d(P);b(p,{children:(u,G)=>{v(u,{content:"_APP_DOMAIN_SITES"})},$$slots:{default:!0}});var I=e(p);b(I,{children:(u,G)=>{o();var N=hr(),R=e(d(N));K(R,{href:"/docs/products/sites/domains",children:(F,kt)=>{o();var ee=s("Site Domains");r(F,ee)},$$slots:{default:!0}});var B=e(R,2);v(B,{content:"[UNIQUE_ID].[_APP_DOMAIN_SITES]"});var U=e(B,2);v(U,{content:"_APP_DOMAIN_SITES"});var Y=e(U,2);v(Y,{content:"example.com"});var C=e(Y,2);v(C,{content:"64d4d22db370ae41a32e.example.com"});var Q=e(C,2);v(Q,{content:"_APP_DOMAIN"}),o(),r(u,N)},$$slots:{default:!0}}),r(f,P)},$$slots:{default:!0}});var w=e(E);k(w,{children:(f,y)=>{var P=Pr(),p=d(P);b(p,{children:(u,G)=>{v(u,{content:"_APP_VCS_GITHUB_APP_NAME"})},$$slots:{default:!0}});var I=e(p);b(I,{children:(u,G)=>{o();var N=s("Name of your GitHub app. This is the display name you'll see on GitHub and it will be visible in your GitHub app's URL.");r(u,N)},$$slots:{default:!0}}),r(f,P)},$$slots:{default:!0}});var D=e(w);k(D,{children:(f,y)=>{var P=Ar(),p=d(P);b(p,{children:(u,G)=>{v(u,{content:"_APP_VCS_GITHUB_PRIVATE_KEY"})},$$slots:{default:!0}});var I=e(p);b(I,{children:(u,G)=>{o();var N=gr(),R=e(d(N));v(R,{content:"\\n"}),o(),r(u,N)},$$slots:{default:!0}}),r(f,P)},$$slots:{default:!0}});var T=e(D);k(T,{children:(f,y)=>{var P=br(),p=d(P);b(p,{children:(u,G)=>{v(u,{content:"_APP_VCS_GITHUB_APP_ID"})},$$slots:{default:!0}});var I=e(p);b(I,{children:(u,G)=>{o();var N=s("GitHub application ID. You can find it in your GitHub application details.");r(u,N)},$$slots:{default:!0}}),r(f,P)},$$slots:{default:!0}});var W=e(T);k(W,{children:(f,y)=>{var P=xr(),p=d(P);b(p,{children:(u,G)=>{v(u,{content:"_APP_VCS_GITHUB_CLIENT_ID"})},$$slots:{default:!0}});var I=e(p);b(I,{children:(u,G)=>{o();var N=s("GitHub client ID. You can find it in your GitHub application details.");r(u,N)},$$slots:{default:!0}}),r(f,P)},$$slots:{default:!0}});var S=e(W);k(S,{children:(f,y)=>{var P=yr(),p=d(P);b(p,{children:(u,G)=>{v(u,{content:"_APP_VCS_GITHUB_CLIENT_SECRET"})},$$slots:{default:!0}});var I=e(p);b(I,{children:(u,G)=>{o();var N=s("GitHub client secret. You can generate secrets in your GitHub application settings.");r(u,N)},$$slots:{default:!0}}),r(f,P)},$$slots:{default:!0}});var M=e(S);k(M,{children:(f,y)=>{var P=wr(),p=d(P);b(p,{children:(u,G)=>{v(u,{content:"_APP_VCS_GITHUB_WEBHOOK_SECRET"})},$$slots:{default:!0}});var I=e(p);b(I,{children:(u,G)=>{o();var N=s("GitHub webhook secret. You can configure it in your GitHub application settings under webhook section.");r(u,N)},$$slots:{default:!0}}),r(f,P)},$$slots:{default:!0}}),r($,_)},$$slots:{default:!0}}),r(a,t)},$$slots:{default:!0}});var Ne=e(Se);x(Ne,{children:(a,i)=>{o();var t=s("For example, see below.");r(a,t)},$$slots:{default:!0}});var De=e(Ne);L(De,{content:`_APP_DOMAIN=appwrite.example.com
_APP_DOMAIN_TARGET=appwrite.example.com
_APP_DOMAIN_FUNCTIONS=functions.example.com
_APP_VCS_GITHUB_APP_NAME=my-github-app
_APP_VCS_GITHUB_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\\nMIIEogIBAAKCAQEAuT8f3lo/X83hfvb0ZN/KD2pl86o/jl3ywKrkj/PQZBmtEv/z\\nIugE//sfFoHWc4cizkcji+n3FNU+GEdvMioKuJlPBqPTY8hAbVn7R0geZLpDV/rs\\n[...]\\n-----END RSA PRIVATE KEY-----"
_APP_VCS_GITHUB_APP_ID=12415
_APP_VCS_GITHUB_CLIENT_ID=Iv1.35asdf43asd
_APP_VCS_GITHUB_CLIENT_SECRET=35rsdse532q13
_APP_VCS_GITHUB_WEBHOOK_SECRET=super-secret
`,language:"bash",process:!0,children:(a,i)=>{o();var t=s(`_APP_DOMAIN=appwrite.example.com
_APP_DOMAIN_TARGET=appwrite.example.com
_APP_DOMAIN_FUNCTIONS=functions.example.com
_APP_VCS_GITHUB_APP_NAME=my-github-app
_APP_VCS_GITHUB_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\\nMIIEogIBAAKCAQEAuT8f3lo/X83hfvb0ZN/KD2pl86o/jl3ywKrkj/PQZBmtEv/z\\nIugE//sfFoHWc4cizkcji+n3FNU+GEdvMioKuJlPBqPTY8hAbVn7R0geZLpDV/rs\\n[...]\\n-----END RSA PRIVATE KEY-----"
_APP_VCS_GITHUB_APP_ID=12415
_APP_VCS_GITHUB_CLIENT_ID=Iv1.35asdf43asd
_APP_VCS_GITHUB_CLIENT_SECRET=35rsdse532q13
_APP_VCS_GITHUB_WEBHOOK_SECRET=super-secret`);r(a,t)},$$slots:{default:!0}});var Oe=e(De);x(Oe,{children:(a,i)=>{K(a,{href:"/docs/advanced/self-hosting/environment-variables",children:(t,n)=>{o();var c=s("Learn more about environment variables");r(t,c)},$$slots:{default:!0}})},$$slots:{default:!0}});var Ge=e(Oe);H(Ge,{id:"existing-apps",level:2,children:(a,i)=>{o();var t=s("Update existing GitHub apps");r(a,t)},$$slots:{default:!0}});var He=e(Ge);x(He,{children:(a,i)=>{o();var t=kr(),n=e(d(t));O(n,{marker:"**",children:(A,m)=>{o();var g=s("Settings");r(A,g)},$$slots:{default:!0}});var c=e(n,2);O(c,{marker:"**",children:(A,m)=>{o();var g=s("Integrations");r(A,g)},$$slots:{default:!0}});var $=e(c,2);O($,{marker:"**",children:(A,m)=>{o();var g=s("Applications");r(A,g)},$$slots:{default:!0}});var h=e($,2);O(h,{marker:"**",children:(A,m)=>{o();var g=s("Installed GitHub Apps");r(A,g)},$$slots:{default:!0}});var _=e(h,2);O(_,{marker:"**",children:(A,m)=>{o();var g=s("Configure");r(A,g)},$$slots:{default:!0}}),o(),r(a,t)},$$slots:{default:!0}});var Re=e(He);H(Re,{id:"sites",level:1,children:(a,i)=>{o();var t=s("Configure Sites runtimes");r(a,t)},$$slots:{default:!0}});var Ce=e(Re);x(Ce,{children:(a,i)=>{o();var t=Er(),n=e(d(t));v(n,{content:"_APP_SITES_RUNTIMES"}),o(),r(a,t)},$$slots:{default:!0}});var Me=e(Ce);x(Me,{children:(a,i)=>{o();var t=s("The three runtimes currently available for Sites are the Static, Node.js 22, and Flutter 3.29 runtimes.");r(a,t)},$$slots:{default:!0}});var Ue=e(Me);L(Ue,{content:`_APP_SITES_RUNTIMES=static-1,node-22,flutter-3.29
`,language:"bash",process:!0,children:(a,i)=>{o();var t=s("_APP_SITES_RUNTIMES=static-1,node-22,flutter-3.29");r(a,t)},$$slots:{default:!0}});var Le=e(Ue);x(Le,{children:(a,i)=>{o();var t=Sr(),n=e(d(t));v(n,{content:"_APP_SITES_TIMEOUT"}),o(),r(a,t)},$$slots:{default:!0}});var Be=e(Le);xt(Be,{title:"Applying changes",children:(a,i)=>{var t=Dr(),n=d(t);x(n,{children:(_,A)=>{o();var m=Nr(),g=e(d(m));v(g,{content:"docker-compose.yml"});var E=e(g,2);v(E,{content:".env"}),o(),r(_,m)},$$slots:{default:!0}});var c=e(n);L(c,{content:`docker compose up -d
`,language:"sh",process:!0,children:(_,A)=>{o();var m=s("docker compose up -d");r(_,m)},$$slots:{default:!0}});var $=e(c);x($,{children:(_,A)=>{o();var m=s("You can verify if the changes have been successfully applied by running this command:");r(_,m)},$$slots:{default:!0}});var h=e($);L(h,{content:`docker compose exec backrush vars
`,language:"sh",process:!0,children:(_,A)=>{o();var m=s("docker compose exec backrush vars");r(_,m)},$$slots:{default:!0}}),r(a,t)}});var Ve=e(Be);H(Ve,{id:"root-domain",level:1,children:(a,i)=>{o();var t=s("Add an apex domain for Sites");r(a,t)},$$slots:{default:!0}});var Ye=e(Ve);x(Ye,{children:(a,i)=>{o();var t=s("Backrush allows you to add an apex domain to your instance's configuration that you can publicly expose your Site on.");r(a,t)},$$slots:{default:!0}});var Ke=e(Ye);xt(Ke,{title:"What is an apex domain?",children:(a,i)=>{x(a,{children:(t,n)=>{o();var c=Or(),$=e(d(c));v($,{content:"myapp.com"});var h=e($,2);v(h,{content:"backrush.myapp.com"}),o(),r(t,c)},$$slots:{default:!0}})}});var qe=e(Ke);x(qe,{children:(a,i)=>{o();var t=Gr(),n=e(d(t));v(n,{content:".env"}),o(),r(a,t)},$$slots:{default:!0}});var Fe=e(qe);j(Fe,{ordered:!1,marker:"-",children:(a,i)=>{var t=Cr(),n=d(t);V(n,{children:($,h)=>{var _=Hr(),A=d(_);v(A,{content:"_APP_DOMAIN_TARGET_A"}),o(),r($,_)},$$slots:{default:!0}});var c=e(n);V(c,{children:($,h)=>{var _=Rr(),A=d(_);v(A,{content:"_APP_DOMAIN_TARGET_AAAA"}),o(),r($,_)},$$slots:{default:!0}}),r(a,t)},$$slots:{default:!0}});var We=e(Fe);x(We,{children:(a,i)=>{o();var t=Mr(),n=e(d(t));O(n,{marker:"**",children:($,h)=>{o();var _=s("Domains");r($,_)},$$slots:{default:!0}});var c=e(n,2);v(c,{content:"myapp.com"}),o(),r(a,t)},$$slots:{default:!0}});var je=e(We);x(je,{children:(a,i)=>{o();var t=s("Next, head to your DNS provider and create an A or AAAA record for your root domain pointing to the server's IP address. This will allow Backrush to serve your sites from the apex domain.");r(a,t)},$$slots:{default:!0}});var Qe=e(je);yt(Qe,{children:(a,i)=>{x(a,{children:(t,n)=>{o();var c=Ur(),$=e(d(c));v($,{content:"A"});var h=e($,2);v(h,{content:"AAAA"}),o(),r(t,c)},$$slots:{default:!0}})},$$slots:{default:!0}});var Ze=e(Qe);H(Ze,{id:"ssl-certificates",level:1,children:(a,i)=>{o();var t=s("SSL certificates for Sites domains");r(a,t)},$$slots:{default:!0}});var ze=e(Ze);x(ze,{children:(a,i)=>{o();var t=Lr(),n=e(d(t));v(n,{content:"*.sites.appwrite.myapp.com"}),o(),r(a,t)},$$slots:{default:!0}});var Je=e(ze);x(Je,{children:(a,i)=>{o();var t=Br(),n=e(d(t));v(n,{content:"6772722a00331315adc3.sites.appwrite.myapp.com"}),o(),r(a,t)},$$slots:{default:!0}});var Xe=e(Je);H(Xe,{level:2,children:(a,i)=>{o();var t=s("Manual certificate generation");r(a,t)},$$slots:{default:!0}});var et=e(Xe);x(et,{children:(a,i)=>{o();var t=s("The simplest way to generate certificates for domains is to use the Backrush SSL command.");r(a,t)},$$slots:{default:!0}});var tt=e(et);L(tt,{content:`docker compose exec backrush ssl --domain="6772722a00331315adc3.sites.appwrite.myapp.com"
`,language:"bash",process:!0,children:(a,i)=>{o();var t=s('docker compose exec backrush ssl --domain="6772722a00331315adc3.sites.appwrite.myapp.com"');r(a,t)},$$slots:{default:!0}});var rt=e(tt);x(rt,{children:(a,i)=>{o();var t=s("The certificate should be generated within a few seconds. If you encounter any issues, you can check the certificate worker logs.");r(a,t)},$$slots:{default:!0}});var ot=e(rt);L(ot,{content:`docker compose logs backrush-worker-certificates
`,language:"bash",process:!0,children:(a,i)=>{o();var t=s("docker compose logs backrush-worker-certificates");r(a,t)},$$slots:{default:!0}});var at=e(ot);x(at,{children:(a,i)=>{o();var t=s("Note that you'll need to run this command for each domain, and repeat it every time you create a new site. If you have many  or frequently create new ones, consider using the automated certificate generation method below.");r(a,t)},$$slots:{default:!0}});var st=e(at);H(st,{level:2,children:(a,i)=>{o();var t=s("Automated certificate generation");r(a,t)},$$slots:{default:!0}});var nt=e(st);x(nt,{children:(a,i)=>{o();var t=Vr(),n=e(d(t));v(n,{content:"*.appwrite.myapp.com"}),o(),r(a,t)},$$slots:{default:!0}});var lt=e(nt);H(lt,{level:3,children:(a,i)=>{o();var t=s("Using DNS challenge with DigitalOcean");r(a,t)},$$slots:{default:!0}});var it=e(lt);x(it,{children:(a,i)=>{o();var t=Yr(),n=e(d(t));v(n,{content:"docker-compose.yml"}),o(),r(a,t)},$$slots:{default:!0}});var dt=e(it);j(dt,{ordered:!0,marker:".",children:(a,i)=>{V(a,{children:(t,n)=>{o();var c=Kr(),$=e(d(c));v($,{content:"traefik"});var h=e($,2);v(h,{content:"command"}),o(),r(t,c)},$$slots:{default:!0}})},$$slots:{default:!0}});var $t=e(dt);L($t,{content:`command:
    # ... existing commands ...
    - --certificatesresolvers.digitalocean.acme.dnschallenge=true
    - --certificatesresolvers.digitalocean.acme.dnschallenge.provider=digitalocean
    - --certificatesresolvers.digitalocean.acme.email=$_APP_SYSTEM_SECURITY_EMAIL_ADDRESS
    - --certificatesresolvers.digitalocean.acme.storage=/storage/certificates/digitalocean.json
`,language:"yaml",process:!0,children:(a,i)=>{o();var t=s(`command:
    # ... existing commands ...
    - --certificatesresolvers.digitalocean.acme.dnschallenge=true
    - --certificatesresolvers.digitalocean.acme.dnschallenge.provider=digitalocean
    - --certificatesresolvers.digitalocean.acme.email=$_APP_SYSTEM_SECURITY_EMAIL_ADDRESS
    - --certificatesresolvers.digitalocean.acme.storage=/storage/certificates/digitalocean.json`);r(a,t)},$$slots:{default:!0}});var ut=e($t);j(ut,{ordered:!0,start:2,marker:".",children:(a,i)=>{V(a,{children:(t,n)=>{o();var c=qr(),$=e(d(c));v($,{content:"traefik"}),o(),r(t,c)},$$slots:{default:!0}})},$$slots:{default:!0}});var _t=e(ut);L(_t,{content:`environment:
    - DO_AUTH_TOKEN=$_APP_DOMAIN_DO_TOKEN
`,language:"yaml",process:!0,children:(a,i)=>{o();var t=s(`environment:
    - DO_AUTH_TOKEN=$_APP_DOMAIN_DO_TOKEN`);r(a,t)},$$slots:{default:!0}});var ct=e(_t);j(ct,{ordered:!0,start:3,marker:".",children:(a,i)=>{V(a,{children:(t,n)=>{o();var c=Fr(),$=e(d(c));v($,{content:"labels"});var h=e($,2);v(h,{content:"backrush"}),o(),r(t,c)},$$slots:{default:!0}})},$$slots:{default:!0}});var pt=e(ct);L(pt,{content:`labels:
    # ... existing labels ...
    - traefik.http.routers.appwrite_api_https.tls.certresolver=digitalocean
    - traefik.http.routers.appwrite_api_https.tls.domains[0].main=$_APP_DOMAIN_TARGET_CNAME
    - traefik.http.routers.appwrite_api_https.tls.domains[0].sans=*.$_APP_DOMAIN_TARGET_CNAME
`,language:"yaml",process:!0,children:(a,i)=>{o();var t=s(`labels:
    # ... existing labels ...
    - traefik.http.routers.appwrite_api_https.tls.certresolver=digitalocean
    - traefik.http.routers.appwrite_api_https.tls.domains[0].main=$_APP_DOMAIN_TARGET_CNAME
    - traefik.http.routers.appwrite_api_https.tls.domains[0].sans=*.$_APP_DOMAIN_TARGET_CNAME`);r(a,t)},$$slots:{default:!0}});var vt=e(pt);j(vt,{ordered:!0,start:4,marker:".",children:(a,i)=>{var t=Xr(),n=d(t);V(n,{children:($,h)=>{var _=Jr(),A=d(_);x(A,{children:(g,E)=>{o();var w=Wr(),D=e(d(w));v(D,{content:".env"}),o(),r(g,w)},$$slots:{default:!0}});var m=e(A);j(m,{ordered:!1,marker:"-",children:(g,E)=>{var w=zr(),D=d(w);V(D,{children:(S,M)=>{var f=jr(),y=d(f);v(y,{content:"_APP_SYSTEM_SECURITY_EMAIL_ADDRESS"}),o(),r(S,f)},$$slots:{default:!0}});var T=e(D);V(T,{children:(S,M)=>{var f=Qr(),y=d(f);v(y,{content:"_APP_DOMAIN_SITES"});var P=e(y,2);v(P,{content:"sites.example.com"}),o(),r(S,f)},$$slots:{default:!0}});var W=e(T);V(W,{children:(S,M)=>{var f=Zr(),y=d(f);v(y,{content:"_APP_DOMAIN_DO_TOKEN"}),o(),r(S,f)},$$slots:{default:!0}}),r(g,w)},$$slots:{default:!0}}),r($,_)},$$slots:{default:!0}});var c=e(n);V(c,{children:($,h)=>{x($,{children:(_,A)=>{o();var m=s("Apply the changes.");r(_,m)},$$slots:{default:!0}})},$$slots:{default:!0}}),r(a,t)},$$slots:{default:!0}});var ft=e(vt);L(ft,{content:`docker compose up -d --force-recreate
`,language:"bash",process:!0,children:(a,i)=>{o();var t=s("docker compose up -d --force-recreate");r(a,t)},$$slots:{default:!0}});var ht=e(ft);H(ht,{level:3,children:(a,i)=>{o();var t=s("Troubleshooting DNS Propagation");r(a,t)},$$slots:{default:!0}});var mt=e(ht);x(mt,{children:(a,i)=>{o();var t=s("If certificate generation fails, first check the Traefik logs to identify the specific issue.");r(a,t)},$$slots:{default:!0}});var Pt=e(mt);L(Pt,{content:`docker compose logs traefik
`,language:"bash",process:!0,children:(a,i)=>{o();var t=s("docker compose logs traefik");r(a,t)},$$slots:{default:!0}});var gt=e(Pt);x(gt,{children:(a,i)=>{o();var t=eo(),n=e(d(t));v(n,{content:"docker-compose.yml"});var c=e(n,2);v(c,{content:"traefik"}),o(),r(a,t)},$$slots:{default:!0}});var At=e(gt);L(At,{content:`environment:
    - DO_AUTH_TOKEN=$_APP_DOMAIN_DO_TOKEN
    - DO_POLLING_INTERVAL=1m
    - DO_PROPAGATION_TIMEOUT=1h
`,language:"yaml",process:!0,children:(a,i)=>{o();var t=s(`environment:
    - DO_AUTH_TOKEN=$_APP_DOMAIN_DO_TOKEN
    - DO_POLLING_INTERVAL=1m
    - DO_PROPAGATION_TIMEOUT=1h`);r(a,t)},$$slots:{default:!0}});var bt=e(At);yt(bt,{children:(a,i)=>{x(a,{children:(t,n)=>{o();var c=s("Note: Let's Encrypt has strict rate limits for certificate requests. If you encounter rate limit errors in the logs, you may need to wait a few hours before trying again.");r(t,c)},$$slots:{default:!0}})},$$slots:{default:!0}});var Tt=e(bt);x(Tt,{children:(a,i)=>{o();var t=to(),n=e(d(t));K(n,{href:"https://doc.traefik.io/traefik/https/acme/#providers",children:(c,$)=>{o();var h=s("Traefik's DNS providers documentation");r(c,h)},$$slots:{default:!0}}),o(),r(a,t)},$$slots:{default:!0}}),St(X),r(It,X)},$$slots:{default:!0}}))}export{To as component};
