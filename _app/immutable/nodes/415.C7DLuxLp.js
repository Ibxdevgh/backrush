import{t as c,b as s,a}from"../chunks/Cw4I5osi.js";import"../chunks/BzVk5r6l.js";import{s as t,f as u,c as Q,n as o,r as X}from"../chunks/NgVQVlRK.js";import{n as Z}from"../chunks/B4IyMRKX.js";import{H as _}from"../chunks/CXsRaEhZ.js";import"../chunks/hMT8fFzP.js";import{I as B}from"../chunks/BypEz2Fd.js";import"../chunks/NwRJ91PD.js";/* empty css                */import"../chunks/BZUG4Puk.js";/* empty css                */import"../chunks/D9bBQFLV.js";import{C as d}from"../chunks/DXp9_3zM.js";import{F as $}from"../chunks/OFUKRh55.js";import"../chunks/POtwinrL.js";import"../chunks/CbbZjpT6.js";/* empty css                */import{P as l}from"../chunks/D8YsId2T.js";import{S as ee}from"../chunks/yHjwcyUH.js";import{L as x}from"../chunks/yh4_9ChP.js";import{A as re}from"../chunks/CqOphJLh.js";const te={layout:"article",title:"Update",description:"Keep your self-hosted Backrush instance up-to-date. Learn how to perform updates, manage versions, and ensure your self-hosted Backrush stays current."};var oe=c("To upgrade your Backrush server from an older version, you should use the Backrush migration tool <!>. The migration tool will adjust your Backrush data to the new version&#39;s structure to make sure your Backrush data is compatible with any internal changes.",1),ae=c("As of version 0.14, Backrush requires <!>. To upgrade Backrush, make sure your Docker installation is updated to support Composer V2.",1),ne=c("If you&#39;re trying to migrate to a next major version such as from <!> to <!>, you will first need to migrate to the latest patch version <!>, then to <!>.",1),se=c("It is highly recommended to <!> data before running the migration. It is recommended to run the migration process on a dev instance and make sure your application is working well and that you have checked for any breaking changes in the new version <!>.",1),ie=c("<!><!><!>",1),pe=c("This is the parent directory where you will find the backrush directory, inside which there are <!> and <!> files.",1),le=c("Your Backrush installation&#39;s parent directory name is expected to be <!>. Changing the directory name will result in a miss-matched docker project names.",1),de=c("This will pull the <!> file for the new version and perform the installation. Once the setup completes, verify that you have the latest version of Backrush.",1),ce=c("Verify that the <!> doesn&#39;t have any errors and all the <!> containers have the same version.",1),ue=c("We can now start the migration. Navigate to the <!> directory where your <!> is present and run the following command.",1),ve=c("<article><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!><!></article>");function Me(E){re(E,Z(te,{children:(G,me)=>{var y=ve(),A=Q(y);l(A,{children:(r,n)=>{o();var e=oe(),i=t(u(e));ee(i,{marker:"**",children:(p,f)=>{o();var v=s("after you have installed the new version");a(p,v)},$$slots:{default:!0}}),o(),a(r,e)},$$slots:{default:!0}});var b=t(A);l(b,{children:(r,n)=>{o();var e=ae(),i=t(u(e));x(i,{href:"https://docs.docker.com/compose/install/",children:(p,f)=>{o();var v=s("Docker Compose Version 2");a(p,v)},$$slots:{default:!0}}),o(),a(r,e)},$$slots:{default:!0}});var T=t(b);B(T,{title:"A note about migration",children:(r,n)=>{var e=ie(),i=u(e);l(i,{children:(v,z)=>{o();var m=s("You can migrate to versions that require a migration path and are higher than your current version, such as from 1.5.0 to 1.5.11.");a(v,m)},$$slots:{default:!0}});var p=t(i);l(p,{children:(v,z)=>{o();var m=ne(),w=t(u(m));d(w,{content:"1.5.0"});var g=t(w,2);d(g,{content:"1.6.0"});var h=t(g,2);d(h,{content:"1.5.11"});var k=t(h,2);d(k,{content:"1.6.0"}),o(),a(v,m)},$$slots:{default:!0}});var f=t(p);l(f,{children:(v,z)=>{o();var m=se(),w=t(u(m));x(w,{href:"https://gist.github.com/Meldiron/47b5851663668102a676aff43c6341f7",children:(h,k)=>{o();var P=s("backup your server");a(h,P)},$$slots:{default:!0}});var g=t(w,2);x(g,{href:"https://github.com/Back-rush/backrush/tags",children:(h,k)=>{o();var P=s("changelog");a(h,P)},$$slots:{default:!0}}),o(),a(v,m)},$$slots:{default:!0}}),a(r,e)}});var C=t(T);l(C,{children:(r,n)=>{o();var e=s("The first step is to install the latest version of Backrush. Head to the directory where you ran your previous Backrush install command.");a(r,e)},$$slots:{default:!0}});var I=t(C);$(I,{content:`parent_directory <= you run the command in this directory
└── backrush
    └── docker-compose.yml
`,language:"text",process:!0,children:(r,n)=>{o();var e=s(`parent_directory <= you run the command in this directory
└── backrush
    └── docker-compose.yml`);a(r,e)},$$slots:{default:!0}});var S=t(I);l(S,{children:(r,n)=>{o();var e=pe(),i=t(u(e));d(i,{content:"docker-compose.yml"});var p=t(i,2);d(p,{content:".env"}),o(),a(r,e)},$$slots:{default:!0}});var U=t(S);_(U,{id:"install-next-version",level:1,children:(r,n)=>{o();var e=s("Installing the next version");a(r,e)},$$slots:{default:!0}});var j=t(U);B(j,{title:"Parent directory naming",children:(r,n)=>{l(r,{children:(e,i)=>{o();var p=le(),f=t(u(p));d(f,{content:"backrush"}),o(),a(e,p)},$$slots:{default:!0}})}});var D=t(j);_(D,{level:2,children:(r,n)=>{o();var e=s("Unix");a(r,e)},$$slots:{default:!0}});var H=t(D);$(H,{content:`docker run -it --rm \\
    --volume /var/run/docker.sock:/var/run/docker.sock \\
    --volume "$(pwd)"/backrush:/usr/src/code/backrush:rw \\
    --entrypoint="upgrade" \\
    backrush/backrush:1.7.4
`,language:"sh",process:!0,children:(r,n)=>{o();var e=s(`docker run -it --rm \\
    --volume /var/run/docker.sock:/var/run/docker.sock \\
    --volume "$(pwd)"/backrush:/usr/src/code/backrush:rw \\
    --entrypoint="upgrade" \\
    backrush/backrush:1.7.4`);a(r,e)},$$slots:{default:!0}});var L=t(H);_(L,{level:2,children:(r,n)=>{o();var e=s("CMD");a(r,e)},$$slots:{default:!0}});var M=t(L);$(M,{content:`docker run -it --rm ^
    --volume //var/run/docker.sock:/var/run/docker.sock ^
    --volume "%cd%"/backrush:/usr/src/code/backrush:rw ^
    --entrypoint="upgrade" ^
    backrush/backrush:1.7.4
`,language:"cmd",process:!0,children:(r,n)=>{o();var e=s(`docker run -it --rm ^
    --volume //var/run/docker.sock:/var/run/docker.sock ^
    --volume "%cd%"/backrush:/usr/src/code/backrush:rw ^
    --entrypoint="upgrade" ^
    backrush/backrush:1.7.4`);a(r,e)},$$slots:{default:!0}});var V=t(M);_(V,{level:2,children:(r,n)=>{o();var e=s("PowerShell");a(r,e)},$$slots:{default:!0}});var q=t(V);$(q,{content:'docker run -it --rm `\n    --volume /var/run/docker.sock:/var/run/docker.sock `\n    --volume ${pwd}/backrush:/usr/src/code/backrush:rw `\n    --entrypoint="upgrade" `\n    backrush/backrush:1.7.4\n',language:"powershell",process:!0,children:(r,n)=>{o();var e=s('docker run -it --rm `\n    --volume /var/run/docker.sock:/var/run/docker.sock `\n    --volume ${pwd}/backrush:/usr/src/code/backrush:rw `\n    --entrypoint="upgrade" `\n    backrush/backrush:1.7.4');a(r,e)},$$slots:{default:!0}});var F=t(q);l(F,{children:(r,n)=>{o();var e=de(),i=t(u(e));d(i,{content:"docker-compose.yml"}),o(),a(r,e)},$$slots:{default:!0}});var O=t(F);$(O,{content:`docker ps | grep backrush/backrush
`,language:"sh",process:!0,children:(r,n)=>{o();var e=s("docker ps | grep backrush/backrush");a(r,e)},$$slots:{default:!0}});var Y=t(O);l(Y,{children:(r,n)=>{o();var e=ce(),i=t(u(e));d(i,{content:"STATUS"});var p=t(i,2);d(p,{content:"backrush/backrush"}),o(),a(r,e)},$$slots:{default:!0}});var K=t(Y);_(K,{id:"running-the-migration",level:1,children:(r,n)=>{o();var e=s("Running the Migration");a(r,e)},$$slots:{default:!0}});var N=t(K);l(N,{children:(r,n)=>{o();var e=ue(),i=t(u(e));d(i,{content:"backrush"});var p=t(i,2);d(p,{content:"docker-compose.yml"}),o(),a(r,e)},$$slots:{default:!0}});var R=t(N);$(R,{content:`cd backrush/
docker compose exec backrush migrate
`,language:"sh",process:!0,children:(r,n)=>{o();var e=s(`cd backrush/
docker compose exec backrush migrate`);a(r,e)},$$slots:{default:!0}});var W=t(R);l(W,{children:(r,n)=>{o();var e=s("The data migration can take longer depending on the amount of data your Backrush instance contains. The Backrush migration command uses multi-threading to speed up the process, meaning that adding more CPU cores can help speed up the process.");a(r,e)},$$slots:{default:!0}});var J=t(W);l(J,{children:(r,n)=>{o();var e=s("Once the migration process has been completed successfully, you're all set to use the latest version of Backrush!");a(r,e)},$$slots:{default:!0}}),X(y),a(G,y)},$$slots:{default:!0}}))}export{Me as component};
